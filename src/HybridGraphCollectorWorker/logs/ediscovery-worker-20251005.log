[2025-10-05 00:00:04.043 -04:00 INF] Microsoft.Hosting.Lifetime: Application is shutting down... {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:00:04.045 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting stopping {"EventId":{"Id":3,"Name":"Stopping"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:00:04.073 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting stopped {"EventId":{"Id":4,"Name":"Stopped"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:16:08.228 -04:00 INF] : Starting Concurrent Hybrid Graph Collector Worker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:16:08.348 -04:00 FTL] : Concurrent Hybrid Graph Collector Worker terminated unexpectedly {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: EDiscovery.Shared.Services.IDeltaQueryService Lifetime: Singleton ImplementationType: EDiscovery.Shared.Services.DeltaQueryService': Unable to resolve service for type 'EDiscovery.Shared.Configuration.DeltaQueryOptions' while attempting to activate 'EDiscovery.Shared.Services.DeltaQueryService'.) (Error while validating the service descriptor 'ServiceType: Microsoft.Extensions.Hosting.IHostedService Lifetime: Singleton ImplementationType: HybridGraphCollectorWorker.Worker': Unable to resolve service for type 'EDiscovery.Shared.Configuration.DeltaQueryOptions' while attempting to activate 'EDiscovery.Shared.Services.DeltaQueryService'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: EDiscovery.Shared.Services.IDeltaQueryService Lifetime: Singleton ImplementationType: EDiscovery.Shared.Services.DeltaQueryService': Unable to resolve service for type 'EDiscovery.Shared.Configuration.DeltaQueryOptions' while attempting to activate 'EDiscovery.Shared.Services.DeltaQueryService'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'EDiscovery.Shared.Configuration.DeltaQueryOptions' while attempting to activate 'EDiscovery.Shared.Services.DeltaQueryService'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.<>c__DisplayClass12_0.<.ctor>b__0()
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Program.cs:line 59
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: Microsoft.Extensions.Hosting.IHostedService Lifetime: Singleton ImplementationType: HybridGraphCollectorWorker.Worker': Unable to resolve service for type 'EDiscovery.Shared.Configuration.DeltaQueryOptions' while attempting to activate 'EDiscovery.Shared.Services.DeltaQueryService'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'EDiscovery.Shared.Configuration.DeltaQueryOptions' while attempting to activate 'EDiscovery.Shared.Services.DeltaQueryService'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

[2025-10-05 00:16:52.173 -04:00 INF] : Starting Concurrent Hybrid Graph Collector Worker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:16:52.288 -04:00 FTL] : Concurrent Hybrid Graph Collector Worker terminated unexpectedly {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: EDiscovery.Shared.Services.IDeltaQueryService Lifetime: Singleton ImplementationType: EDiscovery.Shared.Services.DeltaQueryService': Cannot consume scoped service 'EDiscovery.Shared.Services.EDiscoveryDbContext' from singleton 'EDiscovery.Shared.Services.IDeltaQueryService'.) (Error while validating the service descriptor 'ServiceType: Microsoft.Extensions.Hosting.IHostedService Lifetime: Singleton ImplementationType: HybridGraphCollectorWorker.Worker': Cannot consume scoped service 'EDiscovery.Shared.Services.EDiscoveryDbContext' from singleton 'EDiscovery.Shared.Services.IDeltaQueryService'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: EDiscovery.Shared.Services.IDeltaQueryService Lifetime: Singleton ImplementationType: EDiscovery.Shared.Services.DeltaQueryService': Cannot consume scoped service 'EDiscovery.Shared.Services.EDiscoveryDbContext' from singleton 'EDiscovery.Shared.Services.IDeltaQueryService'.
 ---> System.InvalidOperationException: Cannot consume scoped service 'EDiscovery.Shared.Services.EDiscoveryDbContext' from singleton 'EDiscovery.Shared.Services.IDeltaQueryService'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitCallSite(ServiceCallSite callSite, CallSiteValidatorState argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitConstructor(ConstructorCallSite constructorCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitRootCache(ServiceCallSite singletonCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitCallSite(ServiceCallSite callSite, CallSiteValidatorState argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateCallSite(ServiceCallSite callSite)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.OnCreate(ServiceCallSite callSite)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.<>c__DisplayClass12_0.<.ctor>b__0()
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Program.cs:line 59
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: Microsoft.Extensions.Hosting.IHostedService Lifetime: Singleton ImplementationType: HybridGraphCollectorWorker.Worker': Cannot consume scoped service 'EDiscovery.Shared.Services.EDiscoveryDbContext' from singleton 'EDiscovery.Shared.Services.IDeltaQueryService'.
 ---> System.InvalidOperationException: Cannot consume scoped service 'EDiscovery.Shared.Services.EDiscoveryDbContext' from singleton 'EDiscovery.Shared.Services.IDeltaQueryService'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitCallSite(ServiceCallSite callSite, CallSiteValidatorState argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitConstructor(ConstructorCallSite constructorCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitRootCache(ServiceCallSite singletonCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitCallSite(ServiceCallSite callSite, CallSiteValidatorState argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitConstructor(ConstructorCallSite constructorCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitRootCache(ServiceCallSite singletonCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitCallSite(ServiceCallSite callSite, CallSiteValidatorState argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateCallSite(ServiceCallSite callSite)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.OnCreate(ServiceCallSite callSite)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

[2025-10-05 00:19:10.637 -04:00 INF] : Starting Concurrent Hybrid Graph Collector Worker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:10.823 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: An 'IServiceProvider' was created for internal use by Entity Framework. {"EventId":{"Id":10401,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ServiceProviderCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.124 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobId'} was not created on entity type 'JobAssignment' as the properties are already covered by the index {'JobId', 'Status'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.232 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'JobAssignment.WorkerInstanceId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.299 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.308 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.317 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (6ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.320 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.328 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.332 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.336 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (2ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.342 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteScalar'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.343 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.344 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (1ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.349 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteScalar' (6ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.351 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteScalar' (11ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.353 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.356 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.361 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.381 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.401 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.406 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (5ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.410 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.413 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.415 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.470 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: ConcurrentWorkerServiceStarted | Custodian: null | CorrelationId: c5ae4234 | Data: {"Action":"ConcurrentWorkerServiceStarted","Custodian":null,"Data":{"Version":"2.0.0","Environment":"Development","ConcurrentEnabled":true},"Instance":"DONNELLD-BOOK-3-27292","Timestamp":"2025-10-05T04:19:11.4211223Z","CorrelationId":"c5ae4234"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.472 -04:00 INF] : Concurrent Hybrid Graph Collector Worker started successfully {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.475 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting starting {"EventId":{"Id":1,"Name":"Starting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.557 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: AutoRouter configured with thresholds: 10.0 GB, 50,000 items {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.570 -04:00 INF] HybridGraphCollectorWorker.Worker: Hybrid Graph Collector Worker started at: "2025-10-05T00:19:11.5703961-04:00" | CorrelationId: 61342a32 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.576 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: WorkerServiceExecutionStarted | Custodian: null | CorrelationId: 61342a32 | Data: {"Action":"WorkerServiceExecutionStarted","Custodian":null,"Data":{"StartTime":"2025-10-05T00:19:11.5731767-04:00"},"Instance":"DONNELLD-BOOK-3-27292","Timestamp":"2025-10-05T04:19:11.5732346Z","CorrelationId":"61342a32"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.578 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: c57c3f33 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.579 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: c57c3f33 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.582 -04:00 INF] HybridGraphCollectorWorker.Worker: Processing sample collection job for custodian: test.user@development.com {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.584 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: AutoRouter.DetermineOptimalRoute | CorrelationId: bd1eb786 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.585 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Determining optimal route for custodian: test.user@development.com | CorrelationId: bd1eb786 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.591 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRouterDecisionStarted | Custodian: test.user@development.com | CorrelationId: bd1eb786 | Data: {"Action":"AutoRouterDecisionStarted","Custodian":"test.user@development.com","Data":{"CustodianEmail":"test.user@development.com","JobType":"Email","DateRange":{"StartDate":"2025-09-05T04:19:11.583318Z","EndDate":"2025-10-05T04:19:11.5833465Z"}},"Instance":"DONNELLD-BOOK-3-27292","Timestamp":"2025-10-05T04:19:11.5873152Z","CorrelationId":"bd1eb786"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.595 -04:00 INF] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down. {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.596 -04:00 INF] Microsoft.Hosting.Lifetime: Hosting environment: Development {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.597 -04:00 INF] Microsoft.Hosting.Lifetime: Content root path: C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.599 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting started {"EventId":{"Id":2,"Name":"Started"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.633 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Collection estimates - Size: 5368709120 bytes (5120.00 MB), Items: 10000 | CorrelationId: bd1eb786 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.639 -04:00 DBG] EDiscovery.Shared.Services.AutoRouterService: Applying routing logic with thresholds: 10737418240 bytes, 50000 items | CorrelationId: bd1eb786 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.640 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Route decision: Graph Data Connect selected - current quota already exceeded | CorrelationId: bd1eb786 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.641 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Route decision completed: "GraphDataConnect" (Confidence: 95.0 %) | CorrelationId: bd1eb786 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.653 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRouterDecisionCompleted | Custodian: test.user@development.com | CorrelationId: bd1eb786 | Data: {"Action":"AutoRouterDecisionCompleted","Custodian":"test.user@development.com","Data":{"RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedSize":5368709120,"EstimatedItems":10000,"QuotaUsage":{"UsedBytes":53687091200,"UsedItems":250000}},"Instance":"DONNELLD-BOOK-3-27292","Timestamp":"2025-10-05T04:19:11.6434275Z","CorrelationId":"bd1eb786"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.655 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: AutoRouter.DetermineOptimalRoute | Duration: 70ms | Items: 0 | Size: 0 bytes | CorrelationId: bd1eb786 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.659 -04:00 INF] HybridGraphCollectorWorker.Services.EDiscoveryApiClient: [Job 0] [AutoRouter] Route decision: GraphDataConnect Reason: Current quota usage exceeds Graph API thresholds. Confidence: 95.0% {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.661 -04:00 INF] HybridGraphCollectorWorker.Worker: Graph Data Connect collection requested for job type: "Email" {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.782 -04:00 ERR] HybridGraphCollectorWorker.Worker: Collection failed: Graph Data Connect collection not implemented in POC {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.786 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: a1481793 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.787 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: a1481793 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.802 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:11.835 -04:00 DBG] Microsoft.EntityFrameworkCore.Query: Compiling query expression: 
'DbSet<DeltaCursor>()
    .Where(c => c.IsActive)
    .OrderBy(c => c.LastDeltaTime)' {"EventId":{"Id":10111,"Name":"Microsoft.EntityFrameworkCore.Query.QueryCompilationStarting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.010 -04:00 DBG] Microsoft.EntityFrameworkCore.Query: Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<DeltaCursor>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DeltaCursor.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DeltaCursor.BaselineCompletedAt (DateTime?), 1], [Property: DeltaCursor.CollectionJobId (int?) FK Index, 2], [Property: DeltaCursor.CreatedDate (DateTime) Required, 3], [Property: DeltaCursor.CustodianEmail (string) Required Index MaxLength(200), 4], [Property: DeltaCursor.DeltaQueryCount (int) Required, 5], [Property: DeltaCursor.DeltaToken (string) Required MaxLength(2000), 6], [Property: DeltaCursor.DeltaType (DeltaType) Required Index, 7], [Property: DeltaCursor.ErrorMessage (string) MaxLength(1000), 8], [Property: DeltaCursor.IsActive (bool) Required Index, 9], [Property: DeltaCursor.LastDeltaItemCount (int) Required, 10], [Property: DeltaCursor.LastDeltaSizeBytes (long) Required, 11], [Property: DeltaCursor.LastDeltaTime (DateTime) Required Index, 12], [Property: DeltaCursor.Metadata (string) MaxLength(4000), 13], [Property: DeltaCursor.ScopeId (string) Required Index MaxLength(200), 14], [Property: DeltaCursor.UpdatedDate (DateTime) Required, 15] }
        SELECT d.Id, d.BaselineCompletedAt, d.CollectionJobId, d.CreatedDate, d.CustodianEmail, d.DeltaQueryCount, d.DeltaToken, d.DeltaType, d.ErrorMessage, d.IsActive, d.LastDeltaItemCount, d.LastDeltaSizeBytes, d.LastDeltaTime, d.Metadata, d.ScopeId, d.UpdatedDate
        FROM DeltaCursors AS d
        WHERE d.IsActive
        ORDER BY d.LastDeltaTime ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DeltaCursor.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DeltaCursor.BaselineCompletedAt (DateTime?), 1], [Property: DeltaCursor.CollectionJobId (int?) FK Index, 2], [Property: DeltaCursor.CreatedDate (DateTime) Required, 3], [Property: DeltaCursor.CustodianEmail (string) Required Index MaxLength(200), 4], [Property: DeltaCursor.DeltaQueryCount (int) Required, 5], [Property: DeltaCursor.DeltaToken (string) Required MaxLength(2000), 6], [Property: DeltaCursor.DeltaType (DeltaType) Required Index, 7], [Property: DeltaCursor.ErrorMessage (string) MaxLength(1000), 8], [Property: DeltaCursor.IsActive (bool) Required Index, 9], [Property: DeltaCursor.LastDeltaItemCount (int) Required, 10], [Property: DeltaCursor.LastDeltaSizeBytes (long) Required, 11], [Property: DeltaCursor.LastDeltaTime (DateTime) Required Index, 12], [Property: DeltaCursor.Metadata (string) MaxLength(4000), 13], [Property: DeltaCursor.ScopeId (string) Required Index MaxLength(200), 14], [Property: DeltaCursor.UpdatedDate (DateTime) Required, 15] }
        SELECT d.Id, d.BaselineCompletedAt, d.CollectionJobId, d.CreatedDate, d.CustodianEmail, d.DeltaQueryCount, d.DeltaToken, d.DeltaType, d.ErrorMessage, d.IsActive, d.LastDeltaItemCount, d.LastDeltaSizeBytes, d.LastDeltaTime, d.Metadata, d.ScopeId, d.UpdatedDate
        FROM DeltaCursors AS d
        WHERE d.IsActive
        ORDER BY d.LastDeltaTime ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DeltaCursor entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            DeltaCursor instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(DeltaCursor);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DeltaCursor.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (DeltaCursor)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")]: 
                        {
                            return 
                            {
                                DeltaCursor instance;
                                instance = new DeltaCursor();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<BaselineCompletedAt>k__BackingField = dataReader.IsDBNull(1) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(1);
                                instance.<CollectionJobId>k__BackingField = dataReader.IsDBNull(2) ? default(int?) : (int?)dataReader.GetInt32(2);
                                instance.<CreatedDate>k__BackingField = dataReader.GetDateTime(3);
                                instance.<CustodianEmail>k__BackingField = dataReader.GetString(4);
                                instance.<DeltaQueryCount>k__BackingField = dataReader.GetInt32(5);
                                instance.<DeltaToken>k__BackingField = dataReader.GetString(6);
                                instance.<DeltaType>k__BackingField = Invoke(((EnumToStringConverter<DeltaType>)((IReadOnlyProperty)[LIFTABLE Constant: Property: DeltaCursor.DeltaType (DeltaType) Required Index | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor").FindProperty("DeltaType")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(7));
                                instance.<ErrorMessage>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsActive>k__BackingField = dataReader.GetBoolean(9);
                                instance.<LastDeltaItemCount>k__BackingField = dataReader.GetInt32(10);
                                instance.<LastDeltaSizeBytes>k__BackingField = dataReader.GetInt64(11);
                                instance.<LastDeltaTime>k__BackingField = dataReader.GetDateTime(12);
                                instance.<Metadata>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                instance.<ScopeId>k__BackingField = dataReader.GetString(14);
                                instance.<UpdatedDate>k__BackingField = dataReader.GetDateTime(15);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DeltaCursor)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: EDiscovery.Shared.Services.EDiscoveryDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)' {"EventId":{"Id":10107,"Name":"Microsoft.EntityFrameworkCore.Query.QueryExecutionPlanned"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.030 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.030 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.033 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.035 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.037 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.038 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.039 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.040 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.045 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.049 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.051 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (2ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.061 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:19:12.066 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.068 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.069 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.072 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: a1481793 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:19:12.083 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 297ms | Items: 0 | Size: 0 bytes | CorrelationId: a1481793 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.086 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 507ms | Items: 0 | Size: 0 bytes | CorrelationId: c57c3f33 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:12.089 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.099 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 4563de55 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.102 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 4563de55 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.103 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 79474902 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.104 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 79474902 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.147 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.154 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.156 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (1ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.157 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.159 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.160 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.161 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.163 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.164 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.165 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.168 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.169 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.171 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:19:27.176 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.177 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.179 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.180 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 79474902 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:19:27.187 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 84ms | Items: 0 | Size: 0 bytes | CorrelationId: 79474902 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.190 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 90ms | Items: 0 | Size: 0 bytes | CorrelationId: 4563de55 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:27.192 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.197 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 8c7fb37a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.199 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 8c7fb37a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.200 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: e5a5ce1d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.201 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: e5a5ce1d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.204 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.206 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.207 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.208 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.208 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.209 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.210 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.211 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.211 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.213 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.214 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.215 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.216 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:19:42.219 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.220 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.220 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.221 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: e5a5ce1d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:19:42.224 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 23ms | Items: 0 | Size: 0 bytes | CorrelationId: e5a5ce1d | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.225 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 28ms | Items: 0 | Size: 0 bytes | CorrelationId: 8c7fb37a | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:42.227 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.240 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 2daa8af7 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.242 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 2daa8af7 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.242 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 0e07789e {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.243 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 0e07789e {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.244 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.246 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.246 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.247 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.248 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.249 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.249 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.251 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.252 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.253 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.255 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.256 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.257 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:19:57.260 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.260 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.261 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.262 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 0e07789e {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:19:57.266 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 23ms | Items: 0 | Size: 0 bytes | CorrelationId: 0e07789e | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.269 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 29ms | Items: 0 | Size: 0 bytes | CorrelationId: 2daa8af7 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:19:57.270 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.282 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 1387cc1b {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.285 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 1387cc1b {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.288 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 0f8ac59b {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.289 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 0f8ac59b {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.291 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.293 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.293 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.294 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.295 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.296 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.296 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.297 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.298 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.299 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.300 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.301 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.303 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:20:12.306 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.307 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.308 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.309 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 0f8ac59b {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:20:12.312 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 23ms | Items: 0 | Size: 0 bytes | CorrelationId: 0f8ac59b | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.313 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 31ms | Items: 0 | Size: 0 bytes | CorrelationId: 1387cc1b | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:12.315 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.318 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 702fa681 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.326 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 702fa681 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.330 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 20d73049 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.332 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 20d73049 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.333 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.335 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.336 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.336 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.337 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.338 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.339 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.340 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.340 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.342 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.343 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.344 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.345 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:20:27.348 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.349 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.350 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.351 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 20d73049 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:20:27.355 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 24ms | Items: 0 | Size: 0 bytes | CorrelationId: 20d73049 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.357 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 39ms | Items: 0 | Size: 0 bytes | CorrelationId: 702fa681 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:27.359 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.364 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 7c76e843 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.365 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 7c76e843 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.366 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 06d33710 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.367 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 06d33710 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.368 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.370 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.371 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.372 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.372 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.373 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.374 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.375 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.376 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.377 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.378 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.379 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.381 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:20:42.383 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.384 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.385 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.387 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 06d33710 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:20:42.390 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 24ms | Items: 0 | Size: 0 bytes | CorrelationId: 06d33710 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.392 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 28ms | Items: 0 | Size: 0 bytes | CorrelationId: 7c76e843 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:42.393 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.398 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: bd93b8e3 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.400 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: bd93b8e3 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.401 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: b1c1b425 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.402 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: b1c1b425 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.403 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.405 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.406 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.407 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.408 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.408 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.409 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.410 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.411 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.412 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.414 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.415 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.416 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:20:57.419 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.419 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.421 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.422 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: b1c1b425 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:20:57.426 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 24ms | Items: 0 | Size: 0 bytes | CorrelationId: b1c1b425 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.427 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 29ms | Items: 0 | Size: 0 bytes | CorrelationId: bd93b8e3 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:20:57.429 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.436 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: d07f04ea {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.438 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: d07f04ea {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.440 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 3f5e8da0 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.441 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 3f5e8da0 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.442 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.443 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.444 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.445 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.445 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.446 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.447 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.448 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.449 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.450 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.451 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.453 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.454 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:21:12.457 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.457 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.458 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.459 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 3f5e8da0 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:21:12.462 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 22ms | Items: 0 | Size: 0 bytes | CorrelationId: 3f5e8da0 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.463 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 27ms | Items: 0 | Size: 0 bytes | CorrelationId: d07f04ea | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:12.465 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.476 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 114f4752 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.478 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 114f4752 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.479 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 9ce54dd3 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.480 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 9ce54dd3 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.481 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.483 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.483 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.484 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.485 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.486 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.486 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.487 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.488 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.489 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.490 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.491 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.492 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:21:27.495 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.496 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.497 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.497 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 9ce54dd3 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:21:27.501 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 22ms | Items: 0 | Size: 0 bytes | CorrelationId: 9ce54dd3 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.503 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 26ms | Items: 0 | Size: 0 bytes | CorrelationId: 114f4752 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:27.504 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.515 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 7819ea31 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.518 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 7819ea31 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.519 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 8fcdc3ab {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.520 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 8fcdc3ab {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.521 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.522 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.523 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.524 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.525 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.526 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.526 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.527 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.528 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.530 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.532 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.533 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.534 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:21:42.537 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.538 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.539 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.540 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 8fcdc3ab {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:21:42.543 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 23ms | Items: 0 | Size: 0 bytes | CorrelationId: 8fcdc3ab | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.544 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 29ms | Items: 0 | Size: 0 bytes | CorrelationId: 7819ea31 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:42.546 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.552 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: fca02fa5 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.557 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: fca02fa5 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.559 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: c71378a4 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.560 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: c71378a4 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.562 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.564 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.565 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.566 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.567 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.567 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.568 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.569 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.570 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.571 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.572 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.573 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.575 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:21:57.577 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.578 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.578 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.579 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: c71378a4 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:21:57.582 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 22ms | Items: 0 | Size: 0 bytes | CorrelationId: c71378a4 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.583 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 31ms | Items: 0 | Size: 0 bytes | CorrelationId: fca02fa5 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:21:57.585 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.595 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 78b4d859 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.597 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 78b4d859 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.598 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 912e9e0a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.599 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 912e9e0a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.600 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.602 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.602 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.603 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.604 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.604 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.605 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.606 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.607 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.608 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.609 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.610 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.612 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 00:22:12.615 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.615 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.616 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.617 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 912e9e0a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 116
[2025-10-05 00:22:12.620 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 21ms | Items: 0 | Size: 0 bytes | CorrelationId: 912e9e0a | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.622 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 27ms | Items: 0 | Size: 0 bytes | CorrelationId: 78b4d859 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 00:22:12.623 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:55.835 -04:00 INF] : Starting Concurrent Hybrid Graph Collector Worker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.179 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: An 'IServiceProvider' was created for internal use by Entity Framework. {"EventId":{"Id":10401,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ServiceProviderCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.555 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobId'} was not created on entity type 'JobAssignment' as the properties are already covered by the index {'JobId', 'Status'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.660 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'JobAssignment.WorkerInstanceId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.723 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.735 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.743 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (6ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.746 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.754 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.758 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.763 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (3ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.769 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteScalar'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.770 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.771 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.775 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteScalar' (6ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.777 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteScalar' (10ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.778 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.781 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.786 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.806 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.810 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.813 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (3ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.816 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.817 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.818 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.870 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: ConcurrentWorkerServiceStarted | Custodian: null | CorrelationId: 7f90c99e | Data: {"Action":"ConcurrentWorkerServiceStarted","Custodian":null,"Data":{"Version":"2.0.0","Environment":"Development","ConcurrentEnabled":true},"Instance":"DONNELLD-BOOK-3-4932","Timestamp":"2025-10-05T12:07:56.8227224Z","CorrelationId":"7f90c99e"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.872 -04:00 INF] : Concurrent Hybrid Graph Collector Worker started successfully {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:56.875 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting starting {"EventId":{"Id":1,"Name":"Starting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.457 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: AutoRouter configured with thresholds: 10.0 GB, 50,000 items {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.496 -04:00 WRN] EDiscovery.Shared.Services.GraphDataConnectService: Graph Data Connect Service Bus connection not configured - running in stub mode {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.520 -04:00 INF] HybridGraphCollectorWorker.Worker: Hybrid Graph Collector Worker started at: "2025-10-05T08:07:58.5201922-04:00" | CorrelationId: f59d705c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.530 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: WorkerServiceExecutionStarted | Custodian: null | CorrelationId: f59d705c | Data: {"Action":"WorkerServiceExecutionStarted","Custodian":null,"Data":{"StartTime":"2025-10-05T08:07:58.5247415-04:00"},"Instance":"DONNELLD-BOOK-3-4932","Timestamp":"2025-10-05T12:07:58.5249271Z","CorrelationId":"f59d705c"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.535 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 3e025044 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.536 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 3e025044 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.539 -04:00 INF] HybridGraphCollectorWorker.Worker: Processing sample collection job for custodian: test.user@development.com {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.541 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: AutoRouter.DetermineOptimalRoute | CorrelationId: 435a8f60 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.544 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Determining optimal route for custodian: test.user@development.com | CorrelationId: 435a8f60 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.551 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRouterDecisionStarted | Custodian: test.user@development.com | CorrelationId: 435a8f60 | Data: {"Action":"AutoRouterDecisionStarted","Custodian":"test.user@development.com","Data":{"CustodianEmail":"test.user@development.com","JobType":"Email","DateRange":{"StartDate":"2025-09-05T12:07:58.5402026Z","EndDate":"2025-10-05T12:07:58.5402273Z"}},"Instance":"DONNELLD-BOOK-3-4932","Timestamp":"2025-10-05T12:07:58.5462688Z","CorrelationId":"435a8f60"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.556 -04:00 INF] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down. {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.557 -04:00 INF] Microsoft.Hosting.Lifetime: Hosting environment: Development {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.558 -04:00 INF] Microsoft.Hosting.Lifetime: Content root path: C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.560 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting started {"EventId":{"Id":2,"Name":"Started"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.579 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Collection estimates - Size: 5368709120 bytes (5120.00 MB), Items: 10000 | CorrelationId: 435a8f60 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.583 -04:00 DBG] EDiscovery.Shared.Services.AutoRouterService: Applying routing logic with thresholds: 10737418240 bytes, 50000 items | CorrelationId: 435a8f60 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.584 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Route decision: Graph Data Connect selected - current quota already exceeded | CorrelationId: 435a8f60 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.585 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Route decision completed: "GraphDataConnect" (Confidence: 95.0 %) | CorrelationId: 435a8f60 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.595 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRouterDecisionCompleted | Custodian: test.user@development.com | CorrelationId: 435a8f60 | Data: {"Action":"AutoRouterDecisionCompleted","Custodian":"test.user@development.com","Data":{"RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedSize":5368709120,"EstimatedItems":10000,"QuotaUsage":{"UsedBytes":53687091200,"UsedItems":250000}},"Instance":"DONNELLD-BOOK-3-4932","Timestamp":"2025-10-05T12:07:58.5871414Z","CorrelationId":"435a8f60"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.597 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: AutoRouter.DetermineOptimalRoute | Duration: 55ms | Items: 0 | Size: 0 bytes | CorrelationId: 435a8f60 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.602 -04:00 INF] HybridGraphCollectorWorker.Services.EDiscoveryApiClient: [Job 0] [AutoRouter] Route decision: GraphDataConnect Reason: Current quota usage exceeds Graph API thresholds. Confidence: 95.0% {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.604 -04:00 INF] HybridGraphCollectorWorker.Worker: Graph Data Connect collection requested for job type: "Email" {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.606 -04:00 INF] EDiscovery.Shared.Services.GraphDataConnectService: Triggering Graph Data Connect collection for custodian: test.user@development.com | CorrelationId: 0f151dd1 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.608 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: GdcCollectionTriggered | Custodian: test.user@development.com | CorrelationId: 0f151dd1 | Data: {"Action":"GdcCollectionTriggered","Custodian":"test.user@development.com","Data":{"CustodianEmail":"test.user@development.com","JobType":"Email","DateRange":{"StartDate":"2025-09-05T12:07:58.5402026Z","EndDate":"2025-10-05T12:07:58.5402273Z"},"TriggerType":"AzureDataFactory"},"Instance":"DONNELLD-BOOK-3-4932","Timestamp":"2025-10-05T12:07:58.6079804Z","CorrelationId":"0f151dd1"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:07:58.635 -04:00 INF] EDiscovery.Shared.Services.GraphDataConnectService: GDC Stub Mode - Would send trigger message to ADF:
{
  "pipelineRunId": "480dbdb1501a46bf9ebdb22db20afbb0",
  "collectionRequest": {
    "custodianEmail": "test.user@development.com",
    "jobType": 1,
    "startDate": "2025-09-05T12:07:58.5402026Z",
    "endDate": "2025-10-05T12:07:58.5402273Z",
    "keywords": [
      "contract",
      "agreement"
    ],
    "includeAttachments": true,
    "outputPath": "./output"
  },
  "triggeredAt": "2025-10-05T12:07:58.6120677Z",
  "correlationId": "0f151dd1",
  "priority": 2,
  "estimatedDuration": "01:00:00",
  "retryPolicy": {
    "maxRetries": 3,
    "retryDelayMinutes": 15,
    "exponentialBackoff": true,
    "retryableErrors": [
      "ThrottlingError",
      "TemporaryServiceUnavailable",
      "InternalServerError"
    ]
  },
  "configuration": {
    "outputFormat": "Parquet",
    "compressionType": "Snappy",
    "partitionBy": [
      "custodianEmail",
      "date"
    ],
    "enableDeltaLake": true,
    "dataRetentionDays": 2555,
    "enableEncryption": true,
    "notificationEndpoints": []
  }
} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.534 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: GdcCollectionTriggered | Custodian: test.user@development.com | CorrelationId: 0f151dd1 | Data: {"Action":"GdcCollectionTriggered","Custodian":"test.user@development.com","Data":{"PipelineRunId":"480dbdb1501a46bf9ebdb22db20afbb0","TriggerMessage":{"pipelineRunId":"480dbdb1501a46bf9ebdb22db20afbb0","collectionRequest":{"CustodianEmail":"test.user@development.com","JobType":1,"StartDate":"2025-09-05T12:07:58.5402026Z","EndDate":"2025-10-05T12:07:58.5402273Z","Keywords":["contract","agreement"],"IncludeAttachments":true,"OutputPath":"./output"},"triggeredAt":"2025-10-05T12:07:58.6120677Z","correlationId":"0f151dd1","priority":2,"estimatedDuration":"01:00:00","retryPolicy":{"maxRetries":3,"retryDelayMinutes":15,"exponentialBackoff":true,"retryableErrors":["ThrottlingError","TemporaryServiceUnavailable","InternalServerError"]},"configuration":{"outputFormat":"Parquet","compressionType":"Snappy","partitionBy":["custodianEmail","date"],"enableDeltaLake":true,"dataRetentionDays":2555,"enableEncryption":true,"notificationEndpoints":[]}},"ServiceBusEnabled":false},"Instance":"DONNELLD-BOOK-3-4932","Timestamp":"2025-10-05T12:08:00.5278171Z","CorrelationId":"0f151dd1"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.537 -04:00 INF] HybridGraphCollectorWorker.Worker: Graph Data Connect collection triggered successfully for custodian: test.user@development.com | PipelineRunId: 480dbdb1501a46bf9ebdb22db20afbb0 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.538 -04:00 INF] HybridGraphCollectorWorker.Worker: Collection completed successfully. Items: 0, Size: 0 bytes {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.540 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: ea4d51f3 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.541 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: ea4d51f3 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.558 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.583 -04:00 DBG] Microsoft.EntityFrameworkCore.Query: Compiling query expression: 
'DbSet<DeltaCursor>()
    .Where(c => c.IsActive)
    .OrderBy(c => c.LastDeltaTime)' {"EventId":{"Id":10111,"Name":"Microsoft.EntityFrameworkCore.Query.QueryCompilationStarting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.756 -04:00 DBG] Microsoft.EntityFrameworkCore.Query: Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<DeltaCursor>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DeltaCursor.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DeltaCursor.BaselineCompletedAt (DateTime?), 1], [Property: DeltaCursor.CollectionJobId (int?) FK Index, 2], [Property: DeltaCursor.CreatedDate (DateTime) Required, 3], [Property: DeltaCursor.CustodianEmail (string) Required Index MaxLength(200), 4], [Property: DeltaCursor.DeltaQueryCount (int) Required, 5], [Property: DeltaCursor.DeltaToken (string) Required MaxLength(2000), 6], [Property: DeltaCursor.DeltaType (DeltaType) Required Index, 7], [Property: DeltaCursor.ErrorMessage (string) MaxLength(1000), 8], [Property: DeltaCursor.IsActive (bool) Required Index, 9], [Property: DeltaCursor.LastDeltaItemCount (int) Required, 10], [Property: DeltaCursor.LastDeltaSizeBytes (long) Required, 11], [Property: DeltaCursor.LastDeltaTime (DateTime) Required Index, 12], [Property: DeltaCursor.Metadata (string) MaxLength(4000), 13], [Property: DeltaCursor.ScopeId (string) Required Index MaxLength(200), 14], [Property: DeltaCursor.UpdatedDate (DateTime) Required, 15] }
        SELECT d.Id, d.BaselineCompletedAt, d.CollectionJobId, d.CreatedDate, d.CustodianEmail, d.DeltaQueryCount, d.DeltaToken, d.DeltaType, d.ErrorMessage, d.IsActive, d.LastDeltaItemCount, d.LastDeltaSizeBytes, d.LastDeltaTime, d.Metadata, d.ScopeId, d.UpdatedDate
        FROM DeltaCursors AS d
        WHERE d.IsActive
        ORDER BY d.LastDeltaTime ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DeltaCursor.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DeltaCursor.BaselineCompletedAt (DateTime?), 1], [Property: DeltaCursor.CollectionJobId (int?) FK Index, 2], [Property: DeltaCursor.CreatedDate (DateTime) Required, 3], [Property: DeltaCursor.CustodianEmail (string) Required Index MaxLength(200), 4], [Property: DeltaCursor.DeltaQueryCount (int) Required, 5], [Property: DeltaCursor.DeltaToken (string) Required MaxLength(2000), 6], [Property: DeltaCursor.DeltaType (DeltaType) Required Index, 7], [Property: DeltaCursor.ErrorMessage (string) MaxLength(1000), 8], [Property: DeltaCursor.IsActive (bool) Required Index, 9], [Property: DeltaCursor.LastDeltaItemCount (int) Required, 10], [Property: DeltaCursor.LastDeltaSizeBytes (long) Required, 11], [Property: DeltaCursor.LastDeltaTime (DateTime) Required Index, 12], [Property: DeltaCursor.Metadata (string) MaxLength(4000), 13], [Property: DeltaCursor.ScopeId (string) Required Index MaxLength(200), 14], [Property: DeltaCursor.UpdatedDate (DateTime) Required, 15] }
        SELECT d.Id, d.BaselineCompletedAt, d.CollectionJobId, d.CreatedDate, d.CustodianEmail, d.DeltaQueryCount, d.DeltaToken, d.DeltaType, d.ErrorMessage, d.IsActive, d.LastDeltaItemCount, d.LastDeltaSizeBytes, d.LastDeltaTime, d.Metadata, d.ScopeId, d.UpdatedDate
        FROM DeltaCursors AS d
        WHERE d.IsActive
        ORDER BY d.LastDeltaTime ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DeltaCursor entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            DeltaCursor instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(DeltaCursor);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DeltaCursor.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (DeltaCursor)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")]: 
                        {
                            return 
                            {
                                DeltaCursor instance;
                                instance = new DeltaCursor();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<BaselineCompletedAt>k__BackingField = dataReader.IsDBNull(1) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(1);
                                instance.<CollectionJobId>k__BackingField = dataReader.IsDBNull(2) ? default(int?) : (int?)dataReader.GetInt32(2);
                                instance.<CreatedDate>k__BackingField = dataReader.GetDateTime(3);
                                instance.<CustodianEmail>k__BackingField = dataReader.GetString(4);
                                instance.<DeltaQueryCount>k__BackingField = dataReader.GetInt32(5);
                                instance.<DeltaToken>k__BackingField = dataReader.GetString(6);
                                instance.<DeltaType>k__BackingField = Invoke(((EnumToStringConverter<DeltaType>)((IReadOnlyProperty)[LIFTABLE Constant: Property: DeltaCursor.DeltaType (DeltaType) Required Index | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor").FindProperty("DeltaType")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(7));
                                instance.<ErrorMessage>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsActive>k__BackingField = dataReader.GetBoolean(9);
                                instance.<LastDeltaItemCount>k__BackingField = dataReader.GetInt32(10);
                                instance.<LastDeltaSizeBytes>k__BackingField = dataReader.GetInt64(11);
                                instance.<LastDeltaTime>k__BackingField = dataReader.GetDateTime(12);
                                instance.<Metadata>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                instance.<ScopeId>k__BackingField = dataReader.GetString(14);
                                instance.<UpdatedDate>k__BackingField = dataReader.GetDateTime(15);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DeltaCursor)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: EDiscovery.Shared.Services.EDiscoveryDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)' {"EventId":{"Id":10107,"Name":"Microsoft.EntityFrameworkCore.Query.QueryExecutionPlanned"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.777 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.778 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (1ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.781 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.783 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.785 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.786 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.787 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.788 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.794 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.799 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.800 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.808 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 08:08:00.816 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.817 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.818 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.819 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: ea4d51f3 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 119
[2025-10-05 08:08:00.828 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 288ms | Items: 0 | Size: 0 bytes | CorrelationId: ea4d51f3 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.831 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 2296ms | Items: 0 | Size: 0 bytes | CorrelationId: 3e025044 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:00.834 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.846 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 3f1af788 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.848 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 3f1af788 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.849 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: de10ef2e {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.849 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: de10ef2e {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.890 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.896 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.897 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.898 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.899 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.900 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.901 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.902 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.902 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.904 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.906 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.907 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.908 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Services.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 08:08:15.913 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.914 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.915 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.916 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: de10ef2e {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 378
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 119
[2025-10-05 08:08:15.920 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 71ms | Items: 0 | Size: 0 bytes | CorrelationId: de10ef2e | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.922 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 76ms | Items: 0 | Size: 0 bytes | CorrelationId: 3f1af788 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:15.924 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:30.683 -04:00 INF] Microsoft.Hosting.Lifetime: Application is shutting down... {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:30.684 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting stopping {"EventId":{"Id":3,"Name":"Stopping"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 08:08:30.687 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting stopped {"EventId":{"Id":4,"Name":"Stopped"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:36.615 -04:00 INF] : Starting Concurrent Hybrid Graph Collector Worker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.198 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: An 'IServiceProvider' was created for internal use by Entity Framework. {"EventId":{"Id":10401,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ServiceProviderCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.647 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'AssignedUserId'} was not created on entity type 'CollectionJob' as the properties are already covered by the index {'AssignedUserId', 'Status'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.651 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobId'} was not created on entity type 'JobAssignment' as the properties are already covered by the index {'JobId', 'WorkerId'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.653 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'UserId'} was not created on entity type 'JobAssignment' as the properties are already covered by the index {'UserId', 'Status'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.655 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'ParentJobId'} was not created on entity type 'JobShard' as the properties are already covered by the index {'ParentJobId', 'ShardIndex'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.657 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobShardId'} was not created on entity type 'JobShardCheckpoint' as the properties are already covered by the index {'JobShardId', 'CheckpointKey'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.660 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobShardId'} was not created on entity type 'JobShardCheckpoint' as the properties are already covered by the index {'JobShardId', 'IsCompleted'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.662 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'ManifestId'} was not created on entity type 'ManifestVerification' as the properties are already covered by the index {'ManifestId', 'VerificationDate'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.665 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'UserId'} was not created on entity type 'UserSession' as the properties are already covered by the index {'UserId', 'IsActive'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.784 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'CollectedItem.JobShardId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.787 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'JobAssignment.WorkerInstanceId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.789 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'JobLog.JobShardId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.870 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.882 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.891 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (8ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.898 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.907 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.913 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.918 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (2ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.924 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteScalar'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.927 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.929 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (1ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.934 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteScalar' (9ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.937 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteScalar' (14ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.938 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.942 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.949 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.972 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.978 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.984 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (6ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.987 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.989 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:37.990 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:38.055 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: ConcurrentWorkerServiceStarted | Custodian: null | CorrelationId: e18dc373 | Data: {"Action":"ConcurrentWorkerServiceStarted","Custodian":null,"Data":{"Version":"2.0.0","Environment":"Development","ConcurrentEnabled":true},"Instance":"DONNELLD-BOOK-3-15932","Timestamp":"2025-10-05T18:54:37.9972018Z","CorrelationId":"e18dc373"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:38.058 -04:00 INF] : Concurrent Hybrid Graph Collector Worker started successfully {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:38.062 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting starting {"EventId":{"Id":1,"Name":"Starting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.199 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: AutoRouter configured with thresholds: 10.0 GB, 50,000 items {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.219 -04:00 WRN] EDiscovery.Shared.Services.GraphDataConnectService: Graph Data Connect Service Bus connection not configured - running in stub mode {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.236 -04:00 INF] HybridGraphCollectorWorker.Worker: Hybrid Graph Collector Worker started at: "2025-10-05T14:54:40.2366369-04:00" | CorrelationId: f1da3f87 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.244 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: WorkerServiceExecutionStarted | Custodian: null | CorrelationId: f1da3f87 | Data: {"Action":"WorkerServiceExecutionStarted","Custodian":null,"Data":{"StartTime":"2025-10-05T14:54:40.239133-04:00"},"Instance":"DONNELLD-BOOK-3-15932","Timestamp":"2025-10-05T18:54:40.2392207Z","CorrelationId":"f1da3f87"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.248 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 83f711ad {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.249 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 83f711ad {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.252 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 4268ad8e {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.253 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 4268ad8e {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.256 -04:00 INF] HybridGraphCollectorWorker.Worker: Processing sample collection job for custodian: test.user@development.com | CorrelationId: 28a0da7c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.268 -04:00 INF] HybridGraphCollectorWorker.Services.ObservabilityHelper: JobStarted | {"EventType":"JobStarted","CustodianEmail":"test.user@development.com","JobType":"Email","StartDate":"2025-09-05T18:54:40.2576897Z","EndDate":"2025-10-05T18:54:40.2577126Z","Keywords":["contract","agreement"],"IncludeAttachments":true,"OutputPath":"./output","Timestamp":"2025-10-05T18:54:40.2581565Z","CorrelationId":"28a0da7c"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.270 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: JobStarted | Custodian: null | CorrelationId: 28a0da7c | Data: {"Action":"JobStarted","Custodian":null,"Data":{"EventType":"JobStarted","CustodianEmail":"test.user@development.com","JobType":"Email","StartDate":"2025-09-05T18:54:40.2576897Z","EndDate":"2025-10-05T18:54:40.2577126Z","Keywords":["contract","agreement"],"IncludeAttachments":true,"OutputPath":"./output","Timestamp":"2025-10-05T18:54:40.2581565Z","CorrelationId":"28a0da7c"},"Instance":"DONNELLD-BOOK-3-15932","Timestamp":"2025-10-05T18:54:40.2701556Z","CorrelationId":"28a0da7c"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.274 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: AutoRouter.DetermineOptimalRoute | CorrelationId: 161a23af {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.276 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Determining optimal route for custodian: test.user@development.com | CorrelationId: 161a23af {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.281 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRouterDecisionStarted | Custodian: test.user@development.com | CorrelationId: 161a23af | Data: {"Action":"AutoRouterDecisionStarted","Custodian":"test.user@development.com","Data":{"CustodianEmail":"test.user@development.com","JobType":"Email","DateRange":{"StartDate":"2025-09-05T18:54:40.2576897Z","EndDate":"2025-10-05T18:54:40.2577126Z"}},"Instance":"DONNELLD-BOOK-3-15932","Timestamp":"2025-10-05T18:54:40.2796198Z","CorrelationId":"161a23af"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.286 -04:00 INF] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down. {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.287 -04:00 INF] Microsoft.Hosting.Lifetime: Hosting environment: Development {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.288 -04:00 INF] Microsoft.Hosting.Lifetime: Content root path: C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.289 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting started {"EventId":{"Id":2,"Name":"Started"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.313 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Collection estimates - Size: 5368709120 bytes (5120.00 MB), Items: 10000 | CorrelationId: 161a23af {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.317 -04:00 DBG] EDiscovery.Shared.Services.AutoRouterService: Applying routing logic with thresholds: 10737418240 bytes, 50000 items | CorrelationId: 161a23af {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.318 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Route decision: Graph Data Connect selected - current quota already exceeded | CorrelationId: 161a23af {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.320 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Route decision completed: "GraphDataConnect" (Confidence: 95.0 %) | CorrelationId: 161a23af {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.331 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRouterDecisionCompleted | Custodian: test.user@development.com | CorrelationId: 161a23af | Data: {"Action":"AutoRouterDecisionCompleted","Custodian":"test.user@development.com","Data":{"RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedSize":5368709120,"EstimatedItems":10000,"QuotaUsage":{"UsedBytes":53687091200,"UsedItems":250000}},"Instance":"DONNELLD-BOOK-3-15932","Timestamp":"2025-10-05T18:54:40.3223721Z","CorrelationId":"161a23af"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.333 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: AutoRouter.DetermineOptimalRoute | Duration: 58ms | Items: 0 | Size: 0 bytes | CorrelationId: 161a23af | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.338 -04:00 INF] HybridGraphCollectorWorker.Services.EDiscoveryApiClient: [Job 0] [AutoRouter] Route decision: GraphDataConnect Reason: Current quota usage exceeds Graph API thresholds. Confidence: 95.0% {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.342 -04:00 INF] HybridGraphCollectorWorker.Services.ObservabilityHelper: AutoRoutedToGDC | {"EventType":"AutoRoutedToGDC","CustodianEmail":"test.user@development.com","JobType":"Email","RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedDataSizeBytes":5368709120,"EstimatedItemCount":10000,"Timestamp":"2025-10-05T18:54:40.340568Z","CorrelationId":"28a0da7c"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.344 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRoutedToGDC | Custodian: null | CorrelationId: 28a0da7c | Data: {"Action":"AutoRoutedToGDC","Custodian":null,"Data":{"EventType":"AutoRoutedToGDC","CustodianEmail":"test.user@development.com","JobType":"Email","RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedDataSizeBytes":5368709120,"EstimatedItemCount":10000,"Timestamp":"2025-10-05T18:54:40.340568Z","CorrelationId":"28a0da7c"},"Instance":"DONNELLD-BOOK-3-15932","Timestamp":"2025-10-05T18:54:40.3444544Z","CorrelationId":"28a0da7c"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.347 -04:00 INF] HybridGraphCollectorWorker.Worker: Graph Data Connect collection requested for job type: "Email" {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.349 -04:00 INF] EDiscovery.Shared.Services.GraphDataConnectService: Triggering Graph Data Connect collection for custodian: test.user@development.com | CorrelationId: 2378090f {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.352 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: GdcCollectionTriggered | Custodian: test.user@development.com | CorrelationId: 2378090f | Data: {"Action":"GdcCollectionTriggered","Custodian":"test.user@development.com","Data":{"CustodianEmail":"test.user@development.com","JobType":"Email","DateRange":{"StartDate":"2025-09-05T18:54:40.2576897Z","EndDate":"2025-10-05T18:54:40.2577126Z"},"TriggerType":"AzureDataFactory"},"Instance":"DONNELLD-BOOK-3-15932","Timestamp":"2025-10-05T18:54:40.35133Z","CorrelationId":"2378090f"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:40.376 -04:00 INF] EDiscovery.Shared.Services.GraphDataConnectService: GDC Stub Mode - Would send trigger message to ADF:
{
  "pipelineRunId": "0d66974716aa40508f8e3380b327f7ca",
  "collectionRequest": {
    "custodianEmail": "test.user@development.com",
    "jobType": 1,
    "startDate": "2025-09-05T18:54:40.2576897Z",
    "endDate": "2025-10-05T18:54:40.2577126Z",
    "keywords": [
      "contract",
      "agreement"
    ],
    "includeAttachments": true,
    "outputPath": "./output"
  },
  "triggeredAt": "2025-10-05T18:54:40.3547602Z",
  "correlationId": "2378090f",
  "priority": 2,
  "estimatedDuration": "01:00:00",
  "retryPolicy": {
    "maxRetries": 3,
    "retryDelayMinutes": 15,
    "exponentialBackoff": true,
    "retryableErrors": [
      "ThrottlingError",
      "TemporaryServiceUnavailable",
      "InternalServerError"
    ]
  },
  "configuration": {
    "outputFormat": "Parquet",
    "compressionType": "Snappy",
    "partitionBy": [
      "custodianEmail",
      "date"
    ],
    "enableDeltaLake": true,
    "dataRetentionDays": 2555,
    "enableEncryption": true,
    "notificationEndpoints": []
  }
} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.127 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: GdcCollectionTriggered | Custodian: test.user@development.com | CorrelationId: 2378090f | Data: {"Action":"GdcCollectionTriggered","Custodian":"test.user@development.com","Data":{"PipelineRunId":"0d66974716aa40508f8e3380b327f7ca","TriggerMessage":{"pipelineRunId":"0d66974716aa40508f8e3380b327f7ca","collectionRequest":{"CustodianEmail":"test.user@development.com","JobType":1,"StartDate":"2025-09-05T18:54:40.2576897Z","EndDate":"2025-10-05T18:54:40.2577126Z","Keywords":["contract","agreement"],"IncludeAttachments":true,"OutputPath":"./output"},"triggeredAt":"2025-10-05T18:54:40.3547602Z","correlationId":"2378090f","priority":2,"estimatedDuration":"01:00:00","retryPolicy":{"maxRetries":3,"retryDelayMinutes":15,"exponentialBackoff":true,"retryableErrors":["ThrottlingError","TemporaryServiceUnavailable","InternalServerError"]},"configuration":{"outputFormat":"Parquet","compressionType":"Snappy","partitionBy":["custodianEmail","date"],"enableDeltaLake":true,"dataRetentionDays":2555,"enableEncryption":true,"notificationEndpoints":[]}},"ServiceBusEnabled":false},"Instance":"DONNELLD-BOOK-3-15932","Timestamp":"2025-10-05T18:54:42.1227381Z","CorrelationId":"2378090f"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.133 -04:00 INF] HybridGraphCollectorWorker.Worker: Graph Data Connect collection triggered successfully for custodian: test.user@development.com | PipelineRunId: 0d66974716aa40508f8e3380b327f7ca {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.136 -04:00 INF] HybridGraphCollectorWorker.Worker: Collection completed successfully. Items: 0, Size: 0 bytes | CorrelationId: 28a0da7c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.142 -04:00 INF] HybridGraphCollectorWorker.Services.ObservabilityHelper: JobCompleted | {"EventType":"JobCompleted","CustodianEmail":"test.user@development.com","JobType":"Email","IsSuccessful":true,"ItemCount":0,"SizeBytes":0,"DurationMs":1863,"ErrorMessage":null,"StartTime":null,"EndTime":null,"Timestamp":"2025-10-05T18:54:42.140143Z","CorrelationId":"28a0da7c"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.145 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: JobCompleted | Custodian: null | CorrelationId: 28a0da7c | Data: {"Action":"JobCompleted","Custodian":null,"Data":{"EventType":"JobCompleted","CustodianEmail":"test.user@development.com","JobType":"Email","IsSuccessful":true,"ItemCount":0,"SizeBytes":0,"DurationMs":1863,"ErrorMessage":null,"StartTime":null,"EndTime":null,"Timestamp":"2025-10-05T18:54:42.140143Z","CorrelationId":"28a0da7c"},"Instance":"DONNELLD-BOOK-3-15932","Timestamp":"2025-10-05T18:54:42.1450171Z","CorrelationId":"28a0da7c"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.148 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: f583fd75 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.149 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: f583fd75 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.178 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.200 -04:00 DBG] Microsoft.EntityFrameworkCore.Query: Compiling query expression: 
'DbSet<DeltaCursor>()
    .Where(c => c.IsActive)
    .OrderBy(c => c.LastDeltaTime)' {"EventId":{"Id":10111,"Name":"Microsoft.EntityFrameworkCore.Query.QueryCompilationStarting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.360 -04:00 DBG] Microsoft.EntityFrameworkCore.Query: Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<DeltaCursor>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DeltaCursor.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DeltaCursor.BaselineCompletedAt (DateTime?), 1], [Property: DeltaCursor.CollectionJobId (int?) FK Index, 2], [Property: DeltaCursor.CreatedDate (DateTime) Required, 3], [Property: DeltaCursor.CustodianEmail (string) Required Index MaxLength(200), 4], [Property: DeltaCursor.DeltaQueryCount (int) Required, 5], [Property: DeltaCursor.DeltaToken (string) Required MaxLength(2000), 6], [Property: DeltaCursor.DeltaType (DeltaType) Required Index, 7], [Property: DeltaCursor.ErrorMessage (string) MaxLength(1000), 8], [Property: DeltaCursor.IsActive (bool) Required, 9], [Property: DeltaCursor.LastDeltaItemCount (int) Required, 10], [Property: DeltaCursor.LastDeltaSizeBytes (long) Required, 11], [Property: DeltaCursor.LastDeltaTime (DateTime) Required Index, 12], [Property: DeltaCursor.Metadata (string) MaxLength(4000), 13], [Property: DeltaCursor.ScopeId (string) Required Index MaxLength(200), 14], [Property: DeltaCursor.UpdatedDate (DateTime) Required, 15] }
        SELECT d.Id, d.BaselineCompletedAt, d.CollectionJobId, d.CreatedDate, d.CustodianEmail, d.DeltaQueryCount, d.DeltaToken, d.DeltaType, d.ErrorMessage, d.IsActive, d.LastDeltaItemCount, d.LastDeltaSizeBytes, d.LastDeltaTime, d.Metadata, d.ScopeId, d.UpdatedDate
        FROM DeltaCursors AS d
        WHERE d.IsActive
        ORDER BY d.LastDeltaTime ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DeltaCursor.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DeltaCursor.BaselineCompletedAt (DateTime?), 1], [Property: DeltaCursor.CollectionJobId (int?) FK Index, 2], [Property: DeltaCursor.CreatedDate (DateTime) Required, 3], [Property: DeltaCursor.CustodianEmail (string) Required Index MaxLength(200), 4], [Property: DeltaCursor.DeltaQueryCount (int) Required, 5], [Property: DeltaCursor.DeltaToken (string) Required MaxLength(2000), 6], [Property: DeltaCursor.DeltaType (DeltaType) Required Index, 7], [Property: DeltaCursor.ErrorMessage (string) MaxLength(1000), 8], [Property: DeltaCursor.IsActive (bool) Required, 9], [Property: DeltaCursor.LastDeltaItemCount (int) Required, 10], [Property: DeltaCursor.LastDeltaSizeBytes (long) Required, 11], [Property: DeltaCursor.LastDeltaTime (DateTime) Required Index, 12], [Property: DeltaCursor.Metadata (string) MaxLength(4000), 13], [Property: DeltaCursor.ScopeId (string) Required Index MaxLength(200), 14], [Property: DeltaCursor.UpdatedDate (DateTime) Required, 15] }
        SELECT d.Id, d.BaselineCompletedAt, d.CollectionJobId, d.CreatedDate, d.CustodianEmail, d.DeltaQueryCount, d.DeltaToken, d.DeltaType, d.ErrorMessage, d.IsActive, d.LastDeltaItemCount, d.LastDeltaSizeBytes, d.LastDeltaTime, d.Metadata, d.ScopeId, d.UpdatedDate
        FROM DeltaCursors AS d
        WHERE d.IsActive
        ORDER BY d.LastDeltaTime ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DeltaCursor entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            DeltaCursor instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(DeltaCursor);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DeltaCursor.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (DeltaCursor)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")]: 
                        {
                            return 
                            {
                                DeltaCursor instance;
                                instance = new DeltaCursor();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<BaselineCompletedAt>k__BackingField = dataReader.IsDBNull(1) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(1);
                                instance.<CollectionJobId>k__BackingField = dataReader.IsDBNull(2) ? default(int?) : (int?)dataReader.GetInt32(2);
                                instance.<CreatedDate>k__BackingField = dataReader.GetDateTime(3);
                                instance.<CustodianEmail>k__BackingField = dataReader.GetString(4);
                                instance.<DeltaQueryCount>k__BackingField = dataReader.GetInt32(5);
                                instance.<DeltaToken>k__BackingField = dataReader.GetString(6);
                                instance.<DeltaType>k__BackingField = Invoke(((EnumToNumberConverter<DeltaType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: DeltaCursor.DeltaType (DeltaType) Required Index | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor").FindProperty("DeltaType")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(7));
                                instance.<ErrorMessage>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsActive>k__BackingField = dataReader.GetBoolean(9);
                                instance.<LastDeltaItemCount>k__BackingField = dataReader.GetInt32(10);
                                instance.<LastDeltaSizeBytes>k__BackingField = dataReader.GetInt64(11);
                                instance.<LastDeltaTime>k__BackingField = dataReader.GetDateTime(12);
                                instance.<Metadata>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                instance.<ScopeId>k__BackingField = dataReader.GetString(14);
                                instance.<UpdatedDate>k__BackingField = dataReader.GetDateTime(15);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DeltaCursor)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: EDiscovery.Shared.Data.EDiscoveryDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)' {"EventId":{"Id":10107,"Name":"Microsoft.EntityFrameworkCore.Query.QueryExecutionPlanned"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.381 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.383 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (1ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.385 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.387 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.388 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.389 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.390 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.391 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.396 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.400 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.401 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.410 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Data.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 14:54:42.415 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.416 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.417 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.419 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: f583fd75 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 379
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 128
[2025-10-05 14:54:42.427 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 279ms | Items: 0 | Size: 0 bytes | CorrelationId: f583fd75 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.430 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 2182ms | Items: 0 | Size: 0 bytes | CorrelationId: 83f711ad | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:42.432 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.440 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 2208bdc1 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.451 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 2208bdc1 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.453 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: b38b753d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.456 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: b38b753d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.456 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 393c1b38 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.457 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 393c1b38 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.497 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.502 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.503 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.503 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.504 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.505 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.506 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.507 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.508 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.511 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.513 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\ediscovery.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.514 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server 'ediscovery.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.516 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Data.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 14:54:57.521 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.522 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server 'ediscovery.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.523 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server 'ediscovery.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.524 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 393c1b38 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 379
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 128
[2025-10-05 14:54:57.531 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 74ms | Items: 0 | Size: 0 bytes | CorrelationId: 393c1b38 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.533 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 93ms | Items: 0 | Size: 0 bytes | CorrelationId: 2208bdc1 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:54:57.534 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:55:05.947 -04:00 INF] Microsoft.Hosting.Lifetime: Application is shutting down... {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:55:05.950 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting stopping {"EventId":{"Id":3,"Name":"Stopping"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:55:05.952 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting stopped {"EventId":{"Id":4,"Name":"Stopped"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:17.944 -04:00 INF] : Starting Concurrent Hybrid Graph Collector Worker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.113 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: An 'IServiceProvider' was created for internal use by Entity Framework. {"EventId":{"Id":10401,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ServiceProviderCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.393 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'AssignedUserId'} was not created on entity type 'CollectionJob' as the properties are already covered by the index {'AssignedUserId', 'Status'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.397 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobId'} was not created on entity type 'JobAssignment' as the properties are already covered by the index {'JobId', 'WorkerId'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.398 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'UserId'} was not created on entity type 'JobAssignment' as the properties are already covered by the index {'UserId', 'Status'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.399 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'ParentJobId'} was not created on entity type 'JobShard' as the properties are already covered by the index {'ParentJobId', 'ShardIndex'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.401 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobShardId'} was not created on entity type 'JobShardCheckpoint' as the properties are already covered by the index {'JobShardId', 'CheckpointKey'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.402 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobShardId'} was not created on entity type 'JobShardCheckpoint' as the properties are already covered by the index {'JobShardId', 'IsCompleted'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.403 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'ManifestId'} was not created on entity type 'ManifestVerification' as the properties are already covered by the index {'ManifestId', 'VerificationDate'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.405 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'UserId'} was not created on entity type 'UserSession' as the properties are already covered by the index {'UserId', 'IsActive'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.508 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'CollectedItem.JobShardId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.510 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'JobAssignment.WorkerInstanceId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.512 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'JobLog.JobShardId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.592 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.602 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.611 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (7ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.615 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.625 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.628 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.631 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.638 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteScalar'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.639 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.640 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.644 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteScalar' (6ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.646 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteScalar' (10ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.647 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.649 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.656 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.674 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.678 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.680 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (2ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.683 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.685 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.686 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.737 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: ConcurrentWorkerServiceStarted | Custodian: null | CorrelationId: 473a88a8 | Data: {"Action":"ConcurrentWorkerServiceStarted","Custodian":null,"Data":{"Version":"2.0.0","Environment":"Development","ConcurrentEnabled":true},"Instance":"DONNELLD-BOOK-3-50496","Timestamp":"2025-10-05T18:57:18.6909471Z","CorrelationId":"473a88a8"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.739 -04:00 INF] : Concurrent Hybrid Graph Collector Worker started successfully {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.741 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting starting {"EventId":{"Id":1,"Name":"Starting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.819 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: AutoRouter configured with thresholds: 10.0 GB, 50,000 items {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.825 -04:00 WRN] EDiscovery.Shared.Services.GraphDataConnectService: Graph Data Connect Service Bus connection not configured - running in stub mode {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.841 -04:00 INF] HybridGraphCollectorWorker.Worker: Hybrid Graph Collector Worker started at: "2025-10-05T14:57:18.8416565-04:00" | CorrelationId: cfcbf187 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.847 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: WorkerServiceExecutionStarted | Custodian: null | CorrelationId: cfcbf187 | Data: {"Action":"WorkerServiceExecutionStarted","Custodian":null,"Data":{"StartTime":"2025-10-05T14:57:18.8437248-04:00"},"Instance":"DONNELLD-BOOK-3-50496","Timestamp":"2025-10-05T18:57:18.8438372Z","CorrelationId":"cfcbf187"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.849 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: f5534ff3 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.850 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: f5534ff3 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.854 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 45f76836 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.855 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 45f76836 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.857 -04:00 INF] HybridGraphCollectorWorker.Worker: Processing sample collection job for custodian: test.user@development.com | CorrelationId: 6fc46381 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.868 -04:00 INF] HybridGraphCollectorWorker.Services.ObservabilityHelper: JobStarted | {"EventType":"JobStarted","CustodianEmail":"test.user@development.com","JobType":"Email","StartDate":"2025-09-05T18:57:18.8593519Z","EndDate":"2025-10-05T18:57:18.8593868Z","Keywords":["contract","agreement"],"IncludeAttachments":true,"OutputPath":"./output","Timestamp":"2025-10-05T18:57:18.8599693Z","CorrelationId":"6fc46381"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.869 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: JobStarted | Custodian: null | CorrelationId: 6fc46381 | Data: {"Action":"JobStarted","Custodian":null,"Data":{"EventType":"JobStarted","CustodianEmail":"test.user@development.com","JobType":"Email","StartDate":"2025-09-05T18:57:18.8593519Z","EndDate":"2025-10-05T18:57:18.8593868Z","Keywords":["contract","agreement"],"IncludeAttachments":true,"OutputPath":"./output","Timestamp":"2025-10-05T18:57:18.8599693Z","CorrelationId":"6fc46381"},"Instance":"DONNELLD-BOOK-3-50496","Timestamp":"2025-10-05T18:57:18.8697032Z","CorrelationId":"6fc46381"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.872 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: AutoRouter.DetermineOptimalRoute | CorrelationId: 618408e8 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.873 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Determining optimal route for custodian: test.user@development.com | CorrelationId: 618408e8 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.877 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRouterDecisionStarted | Custodian: test.user@development.com | CorrelationId: 618408e8 | Data: {"Action":"AutoRouterDecisionStarted","Custodian":"test.user@development.com","Data":{"CustodianEmail":"test.user@development.com","JobType":"Email","DateRange":{"StartDate":"2025-09-05T18:57:18.8593519Z","EndDate":"2025-10-05T18:57:18.8593868Z"}},"Instance":"DONNELLD-BOOK-3-50496","Timestamp":"2025-10-05T18:57:18.8750499Z","CorrelationId":"618408e8"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.881 -04:00 INF] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down. {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.881 -04:00 INF] Microsoft.Hosting.Lifetime: Hosting environment: Development {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.882 -04:00 INF] Microsoft.Hosting.Lifetime: Content root path: C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.883 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting started {"EventId":{"Id":2,"Name":"Started"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.916 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Collection estimates - Size: 5368709120 bytes (5120.00 MB), Items: 10000 | CorrelationId: 618408e8 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.922 -04:00 DBG] EDiscovery.Shared.Services.AutoRouterService: Applying routing logic with thresholds: 10737418240 bytes, 50000 items | CorrelationId: 618408e8 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.923 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Route decision: Graph Data Connect selected - current quota already exceeded | CorrelationId: 618408e8 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.924 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Route decision completed: "GraphDataConnect" (Confidence: 95.0 %) | CorrelationId: 618408e8 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.935 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRouterDecisionCompleted | Custodian: test.user@development.com | CorrelationId: 618408e8 | Data: {"Action":"AutoRouterDecisionCompleted","Custodian":"test.user@development.com","Data":{"RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedSize":5368709120,"EstimatedItems":10000,"QuotaUsage":{"UsedBytes":53687091200,"UsedItems":250000}},"Instance":"DONNELLD-BOOK-3-50496","Timestamp":"2025-10-05T18:57:18.9263051Z","CorrelationId":"618408e8"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.937 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: AutoRouter.DetermineOptimalRoute | Duration: 64ms | Items: 0 | Size: 0 bytes | CorrelationId: 618408e8 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.941 -04:00 INF] HybridGraphCollectorWorker.Services.EDiscoveryApiClient: [Job 0] [AutoRouter] Route decision: GraphDataConnect Reason: Current quota usage exceeds Graph API thresholds. Confidence: 95.0% {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.943 -04:00 INF] HybridGraphCollectorWorker.Services.ObservabilityHelper: AutoRoutedToGDC | {"EventType":"AutoRoutedToGDC","CustodianEmail":"test.user@development.com","JobType":"Email","RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedDataSizeBytes":5368709120,"EstimatedItemCount":10000,"Timestamp":"2025-10-05T18:57:18.9427381Z","CorrelationId":"6fc46381"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.944 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRoutedToGDC | Custodian: null | CorrelationId: 6fc46381 | Data: {"Action":"AutoRoutedToGDC","Custodian":null,"Data":{"EventType":"AutoRoutedToGDC","CustodianEmail":"test.user@development.com","JobType":"Email","RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedDataSizeBytes":5368709120,"EstimatedItemCount":10000,"Timestamp":"2025-10-05T18:57:18.9427381Z","CorrelationId":"6fc46381"},"Instance":"DONNELLD-BOOK-3-50496","Timestamp":"2025-10-05T18:57:18.9446457Z","CorrelationId":"6fc46381"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.946 -04:00 INF] HybridGraphCollectorWorker.Worker: Graph Data Connect collection requested for job type: "Email" {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.948 -04:00 INF] EDiscovery.Shared.Services.GraphDataConnectService: Triggering Graph Data Connect collection for custodian: test.user@development.com | CorrelationId: 38a978f4 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.951 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: GdcCollectionTriggered | Custodian: test.user@development.com | CorrelationId: 38a978f4 | Data: {"Action":"GdcCollectionTriggered","Custodian":"test.user@development.com","Data":{"CustodianEmail":"test.user@development.com","JobType":"Email","DateRange":{"StartDate":"2025-09-05T18:57:18.8593519Z","EndDate":"2025-10-05T18:57:18.8593868Z"},"TriggerType":"AzureDataFactory"},"Instance":"DONNELLD-BOOK-3-50496","Timestamp":"2025-10-05T18:57:18.9497439Z","CorrelationId":"38a978f4"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:18.974 -04:00 INF] EDiscovery.Shared.Services.GraphDataConnectService: GDC Stub Mode - Would send trigger message to ADF:
{
  "pipelineRunId": "da1a074b6ba44968a25fc9c25ad44112",
  "collectionRequest": {
    "custodianEmail": "test.user@development.com",
    "jobType": 1,
    "startDate": "2025-09-05T18:57:18.8593519Z",
    "endDate": "2025-10-05T18:57:18.8593868Z",
    "keywords": [
      "contract",
      "agreement"
    ],
    "includeAttachments": true,
    "outputPath": "./output"
  },
  "triggeredAt": "2025-10-05T18:57:18.9540733Z",
  "correlationId": "38a978f4",
  "priority": 2,
  "estimatedDuration": "01:00:00",
  "retryPolicy": {
    "maxRetries": 3,
    "retryDelayMinutes": 15,
    "exponentialBackoff": true,
    "retryableErrors": [
      "ThrottlingError",
      "TemporaryServiceUnavailable",
      "InternalServerError"
    ]
  },
  "configuration": {
    "outputFormat": "Parquet",
    "compressionType": "Snappy",
    "partitionBy": [
      "custodianEmail",
      "date"
    ],
    "enableDeltaLake": true,
    "dataRetentionDays": 2555,
    "enableEncryption": true,
    "notificationEndpoints": []
  }
} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.145 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: GdcCollectionTriggered | Custodian: test.user@development.com | CorrelationId: 38a978f4 | Data: {"Action":"GdcCollectionTriggered","Custodian":"test.user@development.com","Data":{"PipelineRunId":"da1a074b6ba44968a25fc9c25ad44112","TriggerMessage":{"pipelineRunId":"da1a074b6ba44968a25fc9c25ad44112","collectionRequest":{"CustodianEmail":"test.user@development.com","JobType":1,"StartDate":"2025-09-05T18:57:18.8593519Z","EndDate":"2025-10-05T18:57:18.8593868Z","Keywords":["contract","agreement"],"IncludeAttachments":true,"OutputPath":"./output"},"triggeredAt":"2025-10-05T18:57:18.9540733Z","correlationId":"38a978f4","priority":2,"estimatedDuration":"01:00:00","retryPolicy":{"maxRetries":3,"retryDelayMinutes":15,"exponentialBackoff":true,"retryableErrors":["ThrottlingError","TemporaryServiceUnavailable","InternalServerError"]},"configuration":{"outputFormat":"Parquet","compressionType":"Snappy","partitionBy":["custodianEmail","date"],"enableDeltaLake":true,"dataRetentionDays":2555,"enableEncryption":true,"notificationEndpoints":[]}},"ServiceBusEnabled":false},"Instance":"DONNELLD-BOOK-3-50496","Timestamp":"2025-10-05T18:57:20.1377964Z","CorrelationId":"38a978f4"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.149 -04:00 INF] HybridGraphCollectorWorker.Worker: Graph Data Connect collection triggered successfully for custodian: test.user@development.com | PipelineRunId: da1a074b6ba44968a25fc9c25ad44112 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.152 -04:00 INF] HybridGraphCollectorWorker.Worker: Collection completed successfully. Items: 0, Size: 0 bytes | CorrelationId: 6fc46381 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.156 -04:00 INF] HybridGraphCollectorWorker.Services.ObservabilityHelper: JobCompleted | {"EventType":"JobCompleted","CustodianEmail":"test.user@development.com","JobType":"Email","IsSuccessful":true,"ItemCount":0,"SizeBytes":0,"DurationMs":1281,"ErrorMessage":null,"StartTime":null,"EndTime":null,"Timestamp":"2025-10-05T18:57:20.1549151Z","CorrelationId":"6fc46381"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.157 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: JobCompleted | Custodian: null | CorrelationId: 6fc46381 | Data: {"Action":"JobCompleted","Custodian":null,"Data":{"EventType":"JobCompleted","CustodianEmail":"test.user@development.com","JobType":"Email","IsSuccessful":true,"ItemCount":0,"SizeBytes":0,"DurationMs":1281,"ErrorMessage":null,"StartTime":null,"EndTime":null,"Timestamp":"2025-10-05T18:57:20.1549151Z","CorrelationId":"6fc46381"},"Instance":"DONNELLD-BOOK-3-50496","Timestamp":"2025-10-05T18:57:20.1576811Z","CorrelationId":"6fc46381"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.160 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 844051e6 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.161 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 844051e6 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.173 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.192 -04:00 DBG] Microsoft.EntityFrameworkCore.Query: Compiling query expression: 
'DbSet<DeltaCursor>()
    .Where(c => c.IsActive)
    .OrderBy(c => c.LastDeltaTime)' {"EventId":{"Id":10111,"Name":"Microsoft.EntityFrameworkCore.Query.QueryCompilationStarting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.342 -04:00 DBG] Microsoft.EntityFrameworkCore.Query: Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<DeltaCursor>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DeltaCursor.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DeltaCursor.BaselineCompletedAt (DateTime?), 1], [Property: DeltaCursor.CollectionJobId (int?) FK Index, 2], [Property: DeltaCursor.CreatedDate (DateTime) Required, 3], [Property: DeltaCursor.CustodianEmail (string) Required Index MaxLength(200), 4], [Property: DeltaCursor.DeltaQueryCount (int) Required, 5], [Property: DeltaCursor.DeltaToken (string) Required MaxLength(2000), 6], [Property: DeltaCursor.DeltaType (DeltaType) Required Index, 7], [Property: DeltaCursor.ErrorMessage (string) MaxLength(1000), 8], [Property: DeltaCursor.IsActive (bool) Required, 9], [Property: DeltaCursor.LastDeltaItemCount (int) Required, 10], [Property: DeltaCursor.LastDeltaSizeBytes (long) Required, 11], [Property: DeltaCursor.LastDeltaTime (DateTime) Required Index, 12], [Property: DeltaCursor.Metadata (string) MaxLength(4000), 13], [Property: DeltaCursor.ScopeId (string) Required Index MaxLength(200), 14], [Property: DeltaCursor.UpdatedDate (DateTime) Required, 15] }
        SELECT d.Id, d.BaselineCompletedAt, d.CollectionJobId, d.CreatedDate, d.CustodianEmail, d.DeltaQueryCount, d.DeltaToken, d.DeltaType, d.ErrorMessage, d.IsActive, d.LastDeltaItemCount, d.LastDeltaSizeBytes, d.LastDeltaTime, d.Metadata, d.ScopeId, d.UpdatedDate
        FROM DeltaCursors AS d
        WHERE d.IsActive
        ORDER BY d.LastDeltaTime ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DeltaCursor.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DeltaCursor.BaselineCompletedAt (DateTime?), 1], [Property: DeltaCursor.CollectionJobId (int?) FK Index, 2], [Property: DeltaCursor.CreatedDate (DateTime) Required, 3], [Property: DeltaCursor.CustodianEmail (string) Required Index MaxLength(200), 4], [Property: DeltaCursor.DeltaQueryCount (int) Required, 5], [Property: DeltaCursor.DeltaToken (string) Required MaxLength(2000), 6], [Property: DeltaCursor.DeltaType (DeltaType) Required Index, 7], [Property: DeltaCursor.ErrorMessage (string) MaxLength(1000), 8], [Property: DeltaCursor.IsActive (bool) Required, 9], [Property: DeltaCursor.LastDeltaItemCount (int) Required, 10], [Property: DeltaCursor.LastDeltaSizeBytes (long) Required, 11], [Property: DeltaCursor.LastDeltaTime (DateTime) Required Index, 12], [Property: DeltaCursor.Metadata (string) MaxLength(4000), 13], [Property: DeltaCursor.ScopeId (string) Required Index MaxLength(200), 14], [Property: DeltaCursor.UpdatedDate (DateTime) Required, 15] }
        SELECT d.Id, d.BaselineCompletedAt, d.CollectionJobId, d.CreatedDate, d.CustodianEmail, d.DeltaQueryCount, d.DeltaToken, d.DeltaType, d.ErrorMessage, d.IsActive, d.LastDeltaItemCount, d.LastDeltaSizeBytes, d.LastDeltaTime, d.Metadata, d.ScopeId, d.UpdatedDate
        FROM DeltaCursors AS d
        WHERE d.IsActive
        ORDER BY d.LastDeltaTime ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DeltaCursor entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            DeltaCursor instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(DeltaCursor);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DeltaCursor.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (DeltaCursor)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")]: 
                        {
                            return 
                            {
                                DeltaCursor instance;
                                instance = new DeltaCursor();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<BaselineCompletedAt>k__BackingField = dataReader.IsDBNull(1) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(1);
                                instance.<CollectionJobId>k__BackingField = dataReader.IsDBNull(2) ? default(int?) : (int?)dataReader.GetInt32(2);
                                instance.<CreatedDate>k__BackingField = dataReader.GetDateTime(3);
                                instance.<CustodianEmail>k__BackingField = dataReader.GetString(4);
                                instance.<DeltaQueryCount>k__BackingField = dataReader.GetInt32(5);
                                instance.<DeltaToken>k__BackingField = dataReader.GetString(6);
                                instance.<DeltaType>k__BackingField = Invoke(((EnumToNumberConverter<DeltaType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: DeltaCursor.DeltaType (DeltaType) Required Index | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor").FindProperty("DeltaType")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(7));
                                instance.<ErrorMessage>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsActive>k__BackingField = dataReader.GetBoolean(9);
                                instance.<LastDeltaItemCount>k__BackingField = dataReader.GetInt32(10);
                                instance.<LastDeltaSizeBytes>k__BackingField = dataReader.GetInt64(11);
                                instance.<LastDeltaTime>k__BackingField = dataReader.GetDateTime(12);
                                instance.<Metadata>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                instance.<ScopeId>k__BackingField = dataReader.GetString(14);
                                instance.<UpdatedDate>k__BackingField = dataReader.GetDateTime(15);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DeltaCursor)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: EDiscovery.Shared.Data.EDiscoveryDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)' {"EventId":{"Id":10107,"Name":"Microsoft.EntityFrameworkCore.Query.QueryExecutionPlanned"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.362 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.363 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (1ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.365 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.367 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.369 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.370 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.372 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.373 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.379 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.383 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.385 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.393 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Data.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 14:57:20.397 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.398 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.399 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.402 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 844051e6 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 379
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 128
[2025-10-05 14:57:20.410 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 250ms | Items: 0 | Size: 0 bytes | CorrelationId: 844051e6 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.412 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 1563ms | Items: 0 | Size: 0 bytes | CorrelationId: f5534ff3 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:20.414 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.426 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: fd73fd5a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.428 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: fd73fd5a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.429 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: a177cf57 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.430 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: a177cf57 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.430 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 14d2ac6c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.431 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 14d2ac6c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.474 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.479 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.480 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.481 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.482 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.483 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.483 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.484 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.486 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.488 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.489 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.490 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.492 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Data.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 14:57:35.496 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.497 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.498 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.498 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 14d2ac6c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 379
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 128
[2025-10-05 14:57:35.505 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 74ms | Items: 0 | Size: 0 bytes | CorrelationId: 14d2ac6c | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.507 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 80ms | Items: 0 | Size: 0 bytes | CorrelationId: fd73fd5a | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:35.508 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.516 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 0f0a4581 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.520 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 0f0a4581 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.522 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 0ab44915 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.523 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 0ab44915 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.524 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 9d1e46ac {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.524 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 9d1e46ac {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.527 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.529 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.530 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.531 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.532 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.533 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.534 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.536 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.537 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.539 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.541 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.542 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.544 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Data.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 14:57:50.548 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.549 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.550 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.551 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 9d1e46ac {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 379
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 128
[2025-10-05 14:57:50.555 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 31ms | Items: 0 | Size: 0 bytes | CorrelationId: 9d1e46ac | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.557 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 41ms | Items: 0 | Size: 0 bytes | CorrelationId: 0f0a4581 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:57:50.558 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.563 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: bb7a005d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.565 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: bb7a005d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.565 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 549f6732 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.566 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 549f6732 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.567 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 671990dc {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.567 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 671990dc {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.569 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.571 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.571 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.572 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.573 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.574 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.575 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.575 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.576 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.577 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.578 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.579 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.581 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Data.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 14:58:05.584 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.585 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.586 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.587 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: 671990dc {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 379
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 128
[2025-10-05 14:58:05.591 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 24ms | Items: 0 | Size: 0 bytes | CorrelationId: 671990dc | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.593 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 29ms | Items: 0 | Size: 0 bytes | CorrelationId: bb7a005d | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:05.595 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.611 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 86cc244a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.615 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 86cc244a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.617 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 1248ff9f {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.619 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 1248ff9f {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.619 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: f18d0922 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.620 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: f18d0922 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.622 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.624 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.624 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.625 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.626 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.627 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.628 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.628 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.629 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.630 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.632 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.633 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.634 -04:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'EDiscovery.Shared.Data.EDiscoveryDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-10-05 14:58:20.638 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.638 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.639 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.640 -04:00 ERR] HybridGraphCollectorWorker.Worker: Error processing delta queries | CorrelationId: f18d0922 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: DeltaCursors'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EDiscovery.Shared.Services.DeltaQueryService.GetActiveDeltaCursorsAsync() in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscovery.Shared\Services\DeltaQueryService.cs:line 379
   at HybridGraphCollectorWorker.Worker.ProcessDeltaQueriesAsync(CancellationToken cancellationToken) in C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker\Worker.cs:line 128
[2025-10-05 14:58:20.645 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 25ms | Items: 0 | Size: 0 bytes | CorrelationId: f18d0922 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.646 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 35ms | Items: 0 | Size: 0 bytes | CorrelationId: 86cc244a | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:20.648 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:23.944 -04:00 INF] Microsoft.Hosting.Lifetime: Application is shutting down... {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:23.946 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting stopping {"EventId":{"Id":3,"Name":"Stopping"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 14:58:23.949 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting stopped {"EventId":{"Id":4,"Name":"Stopped"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.026 -04:00 INF] : Starting Concurrent Hybrid Graph Collector Worker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.200 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: An 'IServiceProvider' was created for internal use by Entity Framework. {"EventId":{"Id":10401,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ServiceProviderCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.479 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'AssignedUserId'} was not created on entity type 'CollectionJob' as the properties are already covered by the index {'AssignedUserId', 'Status'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.483 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobId'} was not created on entity type 'JobAssignment' as the properties are already covered by the index {'JobId', 'WorkerId'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.485 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'UserId'} was not created on entity type 'JobAssignment' as the properties are already covered by the index {'UserId', 'Status'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.486 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'ParentJobId'} was not created on entity type 'JobShard' as the properties are already covered by the index {'ParentJobId', 'ShardIndex'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.487 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobShardId'} was not created on entity type 'JobShardCheckpoint' as the properties are already covered by the index {'JobShardId', 'CheckpointKey'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.488 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'JobShardId'} was not created on entity type 'JobShardCheckpoint' as the properties are already covered by the index {'JobShardId', 'IsCompleted'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.490 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'ManifestId'} was not created on entity type 'ManifestVerification' as the properties are already covered by the index {'ManifestId', 'VerificationDate'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.491 -04:00 DBG] Microsoft.EntityFrameworkCore.Model: The index {'UserId'} was not created on entity type 'UserSession' as the properties are already covered by the index {'UserId', 'IsActive'}. {"EventId":{"Id":10601,"Name":"Microsoft.EntityFrameworkCore.Model.RedundantIndexRemoved"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.588 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'CollectedItem.JobShardId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.591 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'JobAssignment.WorkerInstanceId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.592 -04:00 DBG] Microsoft.EntityFrameworkCore.Model.Validation: The property 'JobLog.JobShardId' was created in shadow state because there are no eligible CLR members with a matching name. {"EventId":{"Id":10600,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowPropertyCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.666 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.676 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.684 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (7ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.688 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.696 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.699 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.704 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.709 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteScalar'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.710 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.711 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.716 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteScalar' (5ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.718 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteScalar' (10ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.719 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.722 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.726 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.745 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.748 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.751 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (3ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.754 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.755 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.756 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.807 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: ConcurrentWorkerServiceStarted | Custodian: null | CorrelationId: 2a0a3d97 | Data: {"Action":"ConcurrentWorkerServiceStarted","Custodian":null,"Data":{"Version":"2.0.0","Environment":"Development","ConcurrentEnabled":true},"Instance":"DONNELLD-BOOK-3-32632","Timestamp":"2025-10-05T19:01:31.760198Z","CorrelationId":"2a0a3d97"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.809 -04:00 INF] : Concurrent Hybrid Graph Collector Worker started successfully {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.811 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting starting {"EventId":{"Id":1,"Name":"Starting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.895 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: AutoRouter configured with thresholds: 10.0 GB, 50,000 items {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.901 -04:00 WRN] EDiscovery.Shared.Services.GraphDataConnectService: Graph Data Connect Service Bus connection not configured - running in stub mode {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.912 -04:00 INF] HybridGraphCollectorWorker.Worker: Hybrid Graph Collector Worker started at: "2025-10-05T15:01:31.9124603-04:00" | CorrelationId: f45f4640 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.917 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: WorkerServiceExecutionStarted | Custodian: null | CorrelationId: f45f4640 | Data: {"Action":"WorkerServiceExecutionStarted","Custodian":null,"Data":{"StartTime":"2025-10-05T15:01:31.9149354-04:00"},"Instance":"DONNELLD-BOOK-3-32632","Timestamp":"2025-10-05T19:01:31.915013Z","CorrelationId":"f45f4640"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.920 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 12d31ab8 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.921 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 12d31ab8 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.923 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: ddb72ace {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.924 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: ddb72ace {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.926 -04:00 INF] HybridGraphCollectorWorker.Worker: Processing sample collection job for custodian: test.user@development.com | CorrelationId: a7a525ee {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.936 -04:00 INF] HybridGraphCollectorWorker.Services.ObservabilityHelper: JobStarted | {"EventType":"JobStarted","CustodianEmail":"test.user@development.com","JobType":"Email","StartDate":"2025-09-05T19:01:31.9276029Z","EndDate":"2025-10-05T19:01:31.9276216Z","Keywords":["contract","agreement"],"IncludeAttachments":true,"OutputPath":"./output","Timestamp":"2025-10-05T19:01:31.9279797Z","CorrelationId":"a7a525ee"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.937 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: JobStarted | Custodian: null | CorrelationId: a7a525ee | Data: {"Action":"JobStarted","Custodian":null,"Data":{"EventType":"JobStarted","CustodianEmail":"test.user@development.com","JobType":"Email","StartDate":"2025-09-05T19:01:31.9276029Z","EndDate":"2025-10-05T19:01:31.9276216Z","Keywords":["contract","agreement"],"IncludeAttachments":true,"OutputPath":"./output","Timestamp":"2025-10-05T19:01:31.9279797Z","CorrelationId":"a7a525ee"},"Instance":"DONNELLD-BOOK-3-32632","Timestamp":"2025-10-05T19:01:31.9377912Z","CorrelationId":"a7a525ee"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.940 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: AutoRouter.DetermineOptimalRoute | CorrelationId: 499a9e7c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.941 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Determining optimal route for custodian: test.user@development.com | CorrelationId: 499a9e7c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.944 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRouterDecisionStarted | Custodian: test.user@development.com | CorrelationId: 499a9e7c | Data: {"Action":"AutoRouterDecisionStarted","Custodian":"test.user@development.com","Data":{"CustodianEmail":"test.user@development.com","JobType":"Email","DateRange":{"StartDate":"2025-09-05T19:01:31.9276029Z","EndDate":"2025-10-05T19:01:31.9276216Z"}},"Instance":"DONNELLD-BOOK-3-32632","Timestamp":"2025-10-05T19:01:31.9425937Z","CorrelationId":"499a9e7c"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.949 -04:00 INF] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down. {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.950 -04:00 INF] Microsoft.Hosting.Lifetime: Hosting environment: Development {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.951 -04:00 INF] Microsoft.Hosting.Lifetime: Content root path: C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\HybridGraphCollectorWorker {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.952 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting started {"EventId":{"Id":2,"Name":"Started"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.984 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Collection estimates - Size: 5368709120 bytes (5120.00 MB), Items: 10000 | CorrelationId: 499a9e7c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.988 -04:00 DBG] EDiscovery.Shared.Services.AutoRouterService: Applying routing logic with thresholds: 10737418240 bytes, 50000 items | CorrelationId: 499a9e7c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.989 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Route decision: Graph Data Connect selected - current quota already exceeded | CorrelationId: 499a9e7c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:31.990 -04:00 INF] EDiscovery.Shared.Services.AutoRouterService: Route decision completed: "GraphDataConnect" (Confidence: 95.0 %) | CorrelationId: 499a9e7c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:32.001 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRouterDecisionCompleted | Custodian: test.user@development.com | CorrelationId: 499a9e7c | Data: {"Action":"AutoRouterDecisionCompleted","Custodian":"test.user@development.com","Data":{"RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedSize":5368709120,"EstimatedItems":10000,"QuotaUsage":{"UsedBytes":53687091200,"UsedItems":250000}},"Instance":"DONNELLD-BOOK-3-32632","Timestamp":"2025-10-05T19:01:31.9918209Z","CorrelationId":"499a9e7c"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:32.003 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: AutoRouter.DetermineOptimalRoute | Duration: 62ms | Items: 0 | Size: 0 bytes | CorrelationId: 499a9e7c | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:32.006 -04:00 INF] HybridGraphCollectorWorker.Services.EDiscoveryApiClient: [Job 0] [AutoRouter] Route decision: GraphDataConnect Reason: Current quota usage exceeds Graph API thresholds. Confidence: 95.0% {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:32.009 -04:00 INF] HybridGraphCollectorWorker.Services.ObservabilityHelper: AutoRoutedToGDC | {"EventType":"AutoRoutedToGDC","CustodianEmail":"test.user@development.com","JobType":"Email","RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedDataSizeBytes":5368709120,"EstimatedItemCount":10000,"Timestamp":"2025-10-05T19:01:32.0083025Z","CorrelationId":"a7a525ee"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:32.010 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: AutoRoutedToGDC | Custodian: null | CorrelationId: a7a525ee | Data: {"Action":"AutoRoutedToGDC","Custodian":null,"Data":{"EventType":"AutoRoutedToGDC","CustodianEmail":"test.user@development.com","JobType":"Email","RecommendedRoute":"GraphDataConnect","Reason":"Current quota usage exceeds Graph API thresholds","ConfidenceScore":0.95,"EstimatedDataSizeBytes":5368709120,"EstimatedItemCount":10000,"Timestamp":"2025-10-05T19:01:32.0083025Z","CorrelationId":"a7a525ee"},"Instance":"DONNELLD-BOOK-3-32632","Timestamp":"2025-10-05T19:01:32.0103195Z","CorrelationId":"a7a525ee"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:32.012 -04:00 INF] HybridGraphCollectorWorker.Worker: Graph Data Connect collection requested for job type: "Email" {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:32.014 -04:00 INF] EDiscovery.Shared.Services.GraphDataConnectService: Triggering Graph Data Connect collection for custodian: test.user@development.com | CorrelationId: 74e14bfc {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:32.016 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: GdcCollectionTriggered | Custodian: test.user@development.com | CorrelationId: 74e14bfc | Data: {"Action":"GdcCollectionTriggered","Custodian":"test.user@development.com","Data":{"CustodianEmail":"test.user@development.com","JobType":"Email","DateRange":{"StartDate":"2025-09-05T19:01:31.9276029Z","EndDate":"2025-10-05T19:01:31.9276216Z"},"TriggerType":"AzureDataFactory"},"Instance":"DONNELLD-BOOK-3-32632","Timestamp":"2025-10-05T19:01:32.0157606Z","CorrelationId":"74e14bfc"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:32.037 -04:00 INF] EDiscovery.Shared.Services.GraphDataConnectService: GDC Stub Mode - Would send trigger message to ADF:
{
  "pipelineRunId": "008d49fe5d734373a764e132a146f38c",
  "collectionRequest": {
    "custodianEmail": "test.user@development.com",
    "jobType": 1,
    "startDate": "2025-09-05T19:01:31.9276029Z",
    "endDate": "2025-10-05T19:01:31.9276216Z",
    "keywords": [
      "contract",
      "agreement"
    ],
    "includeAttachments": true,
    "outputPath": "./output"
  },
  "triggeredAt": "2025-10-05T19:01:32.0181994Z",
  "correlationId": "74e14bfc",
  "priority": 2,
  "estimatedDuration": "01:00:00",
  "retryPolicy": {
    "maxRetries": 3,
    "retryDelayMinutes": 15,
    "exponentialBackoff": true,
    "retryableErrors": [
      "ThrottlingError",
      "TemporaryServiceUnavailable",
      "InternalServerError"
    ]
  },
  "configuration": {
    "outputFormat": "Parquet",
    "compressionType": "Snappy",
    "partitionBy": [
      "custodianEmail",
      "date"
    ],
    "enableDeltaLake": true,
    "dataRetentionDays": 2555,
    "enableEncryption": true,
    "notificationEndpoints": []
  }
} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.428 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: GdcCollectionTriggered | Custodian: test.user@development.com | CorrelationId: 74e14bfc | Data: {"Action":"GdcCollectionTriggered","Custodian":"test.user@development.com","Data":{"PipelineRunId":"008d49fe5d734373a764e132a146f38c","TriggerMessage":{"pipelineRunId":"008d49fe5d734373a764e132a146f38c","collectionRequest":{"CustodianEmail":"test.user@development.com","JobType":1,"StartDate":"2025-09-05T19:01:31.9276029Z","EndDate":"2025-10-05T19:01:31.9276216Z","Keywords":["contract","agreement"],"IncludeAttachments":true,"OutputPath":"./output"},"triggeredAt":"2025-10-05T19:01:32.0181994Z","correlationId":"74e14bfc","priority":2,"estimatedDuration":"01:00:00","retryPolicy":{"maxRetries":3,"retryDelayMinutes":15,"exponentialBackoff":true,"retryableErrors":["ThrottlingError","TemporaryServiceUnavailable","InternalServerError"]},"configuration":{"outputFormat":"Parquet","compressionType":"Snappy","partitionBy":["custodianEmail","date"],"enableDeltaLake":true,"dataRetentionDays":2555,"enableEncryption":true,"notificationEndpoints":[]}},"ServiceBusEnabled":false},"Instance":"DONNELLD-BOOK-3-32632","Timestamp":"2025-10-05T19:01:33.4226711Z","CorrelationId":"74e14bfc"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.430 -04:00 INF] HybridGraphCollectorWorker.Worker: Graph Data Connect collection triggered successfully for custodian: test.user@development.com | PipelineRunId: 008d49fe5d734373a764e132a146f38c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.431 -04:00 INF] HybridGraphCollectorWorker.Worker: Collection completed successfully. Items: 0, Size: 0 bytes | CorrelationId: a7a525ee {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.434 -04:00 INF] HybridGraphCollectorWorker.Services.ObservabilityHelper: JobCompleted | {"EventType":"JobCompleted","CustodianEmail":"test.user@development.com","JobType":"Email","IsSuccessful":true,"ItemCount":0,"SizeBytes":0,"DurationMs":1492,"ErrorMessage":null,"StartTime":null,"EndTime":null,"Timestamp":"2025-10-05T19:01:33.4331724Z","CorrelationId":"a7a525ee"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.435 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: AUDIT: JobCompleted | Custodian: null | CorrelationId: a7a525ee | Data: {"Action":"JobCompleted","Custodian":null,"Data":{"EventType":"JobCompleted","CustodianEmail":"test.user@development.com","JobType":"Email","IsSuccessful":true,"ItemCount":0,"SizeBytes":0,"DurationMs":1492,"ErrorMessage":null,"StartTime":null,"EndTime":null,"Timestamp":"2025-10-05T19:01:33.4331724Z","CorrelationId":"a7a525ee"},"Instance":"DONNELLD-BOOK-3-32632","Timestamp":"2025-10-05T19:01:33.435849Z","CorrelationId":"a7a525ee"} {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.438 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 33748ea4 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.439 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 33748ea4 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.450 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.470 -04:00 DBG] Microsoft.EntityFrameworkCore.Query: Compiling query expression: 
'DbSet<DeltaCursor>()
    .Where(c => c.IsActive)
    .OrderBy(c => c.LastDeltaTime)' {"EventId":{"Id":10111,"Name":"Microsoft.EntityFrameworkCore.Query.QueryCompilationStarting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.621 -04:00 DBG] Microsoft.EntityFrameworkCore.Query: Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<DeltaCursor>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DeltaCursor.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DeltaCursor.BaselineCompletedAt (DateTime?), 1], [Property: DeltaCursor.CollectionJobId (int?) FK Index, 2], [Property: DeltaCursor.CreatedDate (DateTime) Required, 3], [Property: DeltaCursor.CustodianEmail (string) Required Index MaxLength(200), 4], [Property: DeltaCursor.DeltaQueryCount (int) Required, 5], [Property: DeltaCursor.DeltaToken (string) Required MaxLength(2000), 6], [Property: DeltaCursor.DeltaType (DeltaType) Required Index, 7], [Property: DeltaCursor.ErrorMessage (string) MaxLength(1000), 8], [Property: DeltaCursor.IsActive (bool) Required, 9], [Property: DeltaCursor.LastDeltaItemCount (int) Required, 10], [Property: DeltaCursor.LastDeltaSizeBytes (long) Required, 11], [Property: DeltaCursor.LastDeltaTime (DateTime) Required Index, 12], [Property: DeltaCursor.Metadata (string) MaxLength(4000), 13], [Property: DeltaCursor.ScopeId (string) Required Index MaxLength(200), 14], [Property: DeltaCursor.UpdatedDate (DateTime) Required, 15] }
        SELECT d.Id, d.BaselineCompletedAt, d.CollectionJobId, d.CreatedDate, d.CustodianEmail, d.DeltaQueryCount, d.DeltaToken, d.DeltaType, d.ErrorMessage, d.IsActive, d.LastDeltaItemCount, d.LastDeltaSizeBytes, d.LastDeltaTime, d.Metadata, d.ScopeId, d.UpdatedDate
        FROM DeltaCursors AS d
        WHERE d.IsActive
        ORDER BY d.LastDeltaTime ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DeltaCursor.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DeltaCursor.BaselineCompletedAt (DateTime?), 1], [Property: DeltaCursor.CollectionJobId (int?) FK Index, 2], [Property: DeltaCursor.CreatedDate (DateTime) Required, 3], [Property: DeltaCursor.CustodianEmail (string) Required Index MaxLength(200), 4], [Property: DeltaCursor.DeltaQueryCount (int) Required, 5], [Property: DeltaCursor.DeltaToken (string) Required MaxLength(2000), 6], [Property: DeltaCursor.DeltaType (DeltaType) Required Index, 7], [Property: DeltaCursor.ErrorMessage (string) MaxLength(1000), 8], [Property: DeltaCursor.IsActive (bool) Required, 9], [Property: DeltaCursor.LastDeltaItemCount (int) Required, 10], [Property: DeltaCursor.LastDeltaSizeBytes (long) Required, 11], [Property: DeltaCursor.LastDeltaTime (DateTime) Required Index, 12], [Property: DeltaCursor.Metadata (string) MaxLength(4000), 13], [Property: DeltaCursor.ScopeId (string) Required Index MaxLength(200), 14], [Property: DeltaCursor.UpdatedDate (DateTime) Required, 15] }
        SELECT d.Id, d.BaselineCompletedAt, d.CollectionJobId, d.CreatedDate, d.CustodianEmail, d.DeltaQueryCount, d.DeltaToken, d.DeltaType, d.ErrorMessage, d.IsActive, d.LastDeltaItemCount, d.LastDeltaSizeBytes, d.LastDeltaTime, d.Metadata, d.ScopeId, d.UpdatedDate
        FROM DeltaCursors AS d
        WHERE d.IsActive
        ORDER BY d.LastDeltaTime ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DeltaCursor entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            DeltaCursor instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(DeltaCursor);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: DeltaCursor.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (DeltaCursor)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")]: 
                        {
                            return 
                            {
                                DeltaCursor instance;
                                instance = new DeltaCursor();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<BaselineCompletedAt>k__BackingField = dataReader.IsDBNull(1) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(1);
                                instance.<CollectionJobId>k__BackingField = dataReader.IsDBNull(2) ? default(int?) : (int?)dataReader.GetInt32(2);
                                instance.<CreatedDate>k__BackingField = dataReader.GetDateTime(3);
                                instance.<CustodianEmail>k__BackingField = dataReader.GetString(4);
                                instance.<DeltaQueryCount>k__BackingField = dataReader.GetInt32(5);
                                instance.<DeltaToken>k__BackingField = dataReader.GetString(6);
                                instance.<DeltaType>k__BackingField = Invoke(((EnumToNumberConverter<DeltaType, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: DeltaCursor.DeltaType (DeltaType) Required Index | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor").FindProperty("DeltaType")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(7));
                                instance.<ErrorMessage>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<IsActive>k__BackingField = dataReader.GetBoolean(9);
                                instance.<LastDeltaItemCount>k__BackingField = dataReader.GetInt32(10);
                                instance.<LastDeltaSizeBytes>k__BackingField = dataReader.GetInt64(11);
                                instance.<LastDeltaTime>k__BackingField = dataReader.GetDateTime(12);
                                instance.<Metadata>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                instance.<ScopeId>k__BackingField = dataReader.GetString(14);
                                instance.<UpdatedDate>k__BackingField = dataReader.GetDateTime(15);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: DeltaCursor | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("EDiscovery.Shared.Models.DeltaCursor")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(DeltaCursor)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: EDiscovery.Shared.Data.EDiscoveryDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)' {"EventId":{"Id":10107,"Name":"Microsoft.EntityFrameworkCore.Query.QueryExecutionPlanned"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.640 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.650 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (10ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.655 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.660 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.664 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.668 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (3ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.672 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (8ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.674 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.682 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.705 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.712 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 23ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.719 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.722 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (2ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.725 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: 33748ea4 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.726 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.727 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.728 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.729 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 290ms | Items: 0 | Size: 0 bytes | CorrelationId: 33748ea4 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.732 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 1812ms | Items: 0 | Size: 0 bytes | CorrelationId: 12d31ab8 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:33.735 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.746 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: eddfd3d7 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.751 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: eddfd3d7 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.751 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 7b6d4329 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.752 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 7b6d4329 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.754 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 9b5c3462 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.755 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 9b5c3462 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.795 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.800 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.801 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (1ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.803 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.804 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.805 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.806 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.806 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.808 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.809 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.812 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.813 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 1ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.814 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.816 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.817 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: 9b5c3462 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.818 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.819 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.820 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.821 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 67ms | Items: 0 | Size: 0 bytes | CorrelationId: 9b5c3462 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.823 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 77ms | Items: 0 | Size: 0 bytes | CorrelationId: eddfd3d7 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:01:48.825 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.841 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 86c6695e {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.843 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 86c6695e {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.844 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: baf39af0 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.845 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: baf39af0 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.846 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 08647f3a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.847 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 08647f3a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.849 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.852 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.853 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.854 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.856 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.857 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.858 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.859 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.860 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.862 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.864 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.867 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 2ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.869 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.871 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (2ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.874 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: 08647f3a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.875 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.876 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.878 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.879 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 33ms | Items: 0 | Size: 0 bytes | CorrelationId: 08647f3a | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.882 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 41ms | Items: 0 | Size: 0 bytes | CorrelationId: 86c6695e | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:03.885 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.887 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 72f12d7c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.890 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 72f12d7c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.891 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 5a2e1a7d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.892 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 5a2e1a7d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.892 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: cd5a603d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.893 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: cd5a603d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.894 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.897 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.898 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.900 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.901 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.903 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.903 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.905 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.907 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.909 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.910 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.912 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 1ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.913 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.914 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.915 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: cd5a603d {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.916 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.918 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.920 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.921 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 28ms | Items: 0 | Size: 0 bytes | CorrelationId: cd5a603d | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.924 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 36ms | Items: 0 | Size: 0 bytes | CorrelationId: 72f12d7c | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:18.926 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.927 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 3e4b4c07 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.931 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 3e4b4c07 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.933 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 36162f67 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.934 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 36162f67 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.935 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: eb44ed28 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.937 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: eb44ed28 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.942 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.947 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.948 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.949 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.950 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.952 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.953 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.954 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.955 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.958 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.960 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.960 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 0ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.961 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.963 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.964 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: eb44ed28 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.964 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.965 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.966 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.967 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 31ms | Items: 0 | Size: 0 bytes | CorrelationId: eb44ed28 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.969 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 41ms | Items: 0 | Size: 0 bytes | CorrelationId: 3e4b4c07 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:33.971 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:48.980 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: a709e7af {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:48.985 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: a709e7af {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:48.990 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: e3b196c7 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:48.992 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: e3b196c7 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:48.995 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 0779f070 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:48.999 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 0779f070 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.001 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.006 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.010 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (3ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.013 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.015 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.016 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.017 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.020 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (3ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.022 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.025 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.026 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.027 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 1ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.028 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.029 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.030 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: 0779f070 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.031 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.032 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.033 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.034 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 38ms | Items: 0 | Size: 0 bytes | CorrelationId: 0779f070 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.036 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 56ms | Items: 0 | Size: 0 bytes | CorrelationId: a709e7af | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:02:49.039 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.043 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 65248f01 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.046 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 65248f01 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.046 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 2cb4b6d0 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.047 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 2cb4b6d0 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.048 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 061fbf26 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.050 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 061fbf26 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.051 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.053 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.053 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.054 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.055 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.056 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.057 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.059 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.060 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.062 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.063 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.064 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 0ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.065 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.066 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.067 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: 061fbf26 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.068 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.068 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.069 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.071 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 22ms | Items: 0 | Size: 0 bytes | CorrelationId: 061fbf26 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.073 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 29ms | Items: 0 | Size: 0 bytes | CorrelationId: 65248f01 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:04.075 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.078 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 7256ff67 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.080 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 7256ff67 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.082 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: a7a290d7 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.084 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: a7a290d7 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.087 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: cdc2094c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.089 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: cdc2094c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.093 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.098 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.100 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (1ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.102 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.105 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.108 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.110 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.113 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (4ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.115 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.119 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.123 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.126 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 3ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.130 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.134 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (3ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.136 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: cdc2094c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.138 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.140 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.143 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (2ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.145 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 58ms | Items: 0 | Size: 0 bytes | CorrelationId: cdc2094c | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.149 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 70ms | Items: 0 | Size: 0 bytes | CorrelationId: 7256ff67 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:19.153 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.159 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 882ddc4f {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.163 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 882ddc4f {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.166 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: a9aac024 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.167 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: a9aac024 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.168 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 363bbd14 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.169 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 363bbd14 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.171 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.175 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.176 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (1ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.178 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.179 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.181 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.181 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.182 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.183 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.185 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.187 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.189 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 2ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.191 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.192 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.193 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: 363bbd14 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.194 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.195 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.195 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.197 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 28ms | Items: 0 | Size: 0 bytes | CorrelationId: 363bbd14 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.198 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 39ms | Items: 0 | Size: 0 bytes | CorrelationId: 882ddc4f | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:34.199 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.210 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: 3207e457 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.212 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: 3207e457 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.213 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: e5d7e76a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.214 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: e5d7e76a {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.214 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 9845c041 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.215 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 9845c041 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.216 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.218 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.218 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.219 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.220 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.221 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.222 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.223 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (2ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.224 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.227 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.229 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.231 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 1ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.232 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.233 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.234 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: 9845c041 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.235 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.235 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.237 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.239 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 24ms | Items: 0 | Size: 0 bytes | CorrelationId: 9845c041 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.241 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 30ms | Items: 0 | Size: 0 bytes | CorrelationId: 3207e457 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:03:49.243 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.254 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: ffffc3f6 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.255 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: ffffc3f6 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.257 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 8c857e6c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.259 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 8c857e6c {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.259 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 8c0825ed {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.260 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 8c0825ed {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.262 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.263 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.264 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.264 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.265 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.266 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.267 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.267 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.268 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.270 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.271 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.272 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 1ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.274 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.275 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.275 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: 8c0825ed {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.277 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.278 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.280 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.281 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 21ms | Items: 0 | Size: 0 bytes | CorrelationId: 8c0825ed | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.282 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 27ms | Items: 0 | Size: 0 bytes | CorrelationId: ffffc3f6 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:04.283 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.287 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: f0a4f5f0 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.289 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: f0a4f5f0 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.290 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: f4c1efd2 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.290 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: f4c1efd2 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.291 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 54eb8b71 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.292 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 54eb8b71 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.293 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.295 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.295 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.296 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.297 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.298 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.298 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.299 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (1ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.300 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.301 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.303 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.304 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 1ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.305 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.307 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.308 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: 54eb8b71 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.309 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.310 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.311 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.312 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 20ms | Items: 0 | Size: 0 bytes | CorrelationId: 54eb8b71 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.313 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 26ms | Items: 0 | Size: 0 bytes | CorrelationId: f0a4f5f0 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:19.315 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.325 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessPendingJobs | CorrelationId: c44ec213 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.326 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for pending collection jobs | CorrelationId: c44ec213 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.327 -04:00 DBG] HybridGraphCollectorWorker.Worker: Checking for available job shards | CorrelationId: 18591b80 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.327 -04:00 DBG] HybridGraphCollectorWorker.Worker: Sharded job services not available, skipping shard processing | CorrelationId: 18591b80 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.328 -04:00 DBG] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE_START: Worker.ProcessDeltaQueries | CorrelationId: 45059401 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.329 -04:00 DBG] HybridGraphCollectorWorker.Worker: Processing delta queries | CorrelationId: 45059401 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.330 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: Entity Framework Core 9.0.9 initialized 'EDiscoveryDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.9' with options: None {"EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.332 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Creating DbConnection. {"EventId":{"Id":20005,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.333 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Created DbConnection. (0ms). {"EventId":{"Id":20006,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.333 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opening connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20000,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpening"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.334 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Opened connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20001,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionOpened"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.335 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Creating DbCommand for 'ExecuteReader'. {"EventId":{"Id":20103,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreating"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.336 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Created DbCommand for 'ExecuteReader' (0ms). {"EventId":{"Id":20104,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandCreated"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.339 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Initialized DbCommand for 'ExecuteReader' (3ms). {"EventId":{"Id":20106,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandInitialized"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.341 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20100,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuting"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.343 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."BaselineCompletedAt", "d"."CollectionJobId", "d"."CreatedDate", "d"."CustodianEmail", "d"."DeltaQueryCount", "d"."DeltaToken", "d"."DeltaType", "d"."ErrorMessage", "d"."IsActive", "d"."LastDeltaItemCount", "d"."LastDeltaSizeBytes", "d"."LastDeltaTime", "d"."Metadata", "d"."ScopeId", "d"."UpdatedDate"
FROM "DeltaCursors" AS "d"
WHERE "d"."IsActive"
ORDER BY "d"."LastDeltaTime" {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.345 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: Closing data reader to 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20301,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.346 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Command: A data reader for 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db' is being disposed after spending 1ms reading results. {"EventId":{"Id":20300,"Name":"Microsoft.EntityFrameworkCore.Database.Command.DataReaderDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.347 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closing connection to database 'main' on server 'C:\Users\dnnll\source\repos\_VisualStudio_Code\M365Test\src\EDiscoveryIntakeApi\ediscovery-dev.db'. {"EventId":{"Id":20002,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.349 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Closed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (1ms). {"EventId":{"Id":20003,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionClosed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.349 -04:00 DBG] HybridGraphCollectorWorker.Worker: No active delta cursors found | CorrelationId: 45059401 {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.350 -04:00 DBG] Microsoft.EntityFrameworkCore.Infrastructure: 'EDiscoveryDbContext' disposed. {"EventId":{"Id":10407,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.351 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposing connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db'. {"EventId":{"Id":20007,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposing"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.352 -04:00 DBG] Microsoft.EntityFrameworkCore.Database.Connection: Disposed connection to database 'main' on server '../EDiscoveryIntakeApi/ediscovery-dev.db' (0ms). {"EventId":{"Id":20008,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionDisposed"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.353 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessDeltaQueries | Duration: 25ms | Items: 0 | Size: 0 bytes | CorrelationId: 45059401 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.355 -04:00 INF] EDiscovery.Shared.Services.ComplianceLogger: PERFORMANCE: Worker.ProcessPendingJobs | Duration: 30ms | Items: 0 | Size: 0 bytes | CorrelationId: c44ec213 | Throughput: 0.00 items/sec, 0.00 MB/sec {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:34.357 -04:00 DBG] HybridGraphCollectorWorker.Worker: Waiting 15 seconds before next poll {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:35.561 -04:00 INF] Microsoft.Hosting.Lifetime: Application is shutting down... {"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:35.562 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting stopping {"EventId":{"Id":3,"Name":"Stopping"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
[2025-10-05 15:04:35.565 -04:00 DBG] Microsoft.Extensions.Hosting.Internal.Host: Hosting stopped {"EventId":{"Id":4,"Name":"Stopped"},"Application":"HybridGraphCollectorWorker","Environment":"Development"}
